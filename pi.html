<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Torc: Torc on the Raspberry Pi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Torc
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="d6/db6/class_torc.html">Torc</a> on the Raspberry Pi </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="pitorc"></a>
Introduction</h1>
<p><a class="el" href="d6/db6/class_torc.html">Torc</a> was originally written for installation on a Model B Raspberry Pi but will work on any version of the hardware. It has been tested on the Model B and Zero.</p>
<p>A full desktop installation is not required but a network connection is highly recommended (<a class="el" href="d6/db6/class_torc.html">Torc</a> is accessed through a web interface).</p>
<dl class="section note"><dt>Note</dt><dd>While <a class="el" href="d6/db6/class_torc.html">Torc</a> will run on the compute module, GPIO will not currently work as the pin numbering scheme is different.</dd>
<dd>
The following instructions are not exhaustive and additional steps may be required for distributions other than Raspbian Stretch.</dd></dl>
<h1><a class="anchor" id="piinstall"></a>
Installing on the Raspberry Pi.</h1>
<h2><a class="anchor" id="pidownload"></a>
Download and install linux.</h2>
<p>Download the latest version of your favourite Raspberry Pi linux image (the following instructions assume Raspbian Stretch Lite - but any recent distribution should work). <a class="el" href="d6/db6/class_torc.html">Torc</a> does not require a desktop interface so a minimal (headless) version is fine. Install that image on a suitable SD card and insert the card into your device.</p>
<h2><a class="anchor" id="piboot"></a>
Boot device and log in.</h2>
<p>Boot your device and log in. If you are running a full desktop insallation, open a command terminal - the following assumes you are installing from the command line.</p>
<h2><a class="anchor" id="piupdate"></a>
Update your installation.</h2>
<p>Update your distribution for all of the latest fixes and releases by typing the following commands (depending on the number of updates, this may take a few minutes): </p><div class="fragment"><div class="line">sudo apt-<span class="keyword">get</span> update</div><div class="line">sudo apt-<span class="keyword">get</span> upgrade</div></div><!-- fragment --><h2><a class="anchor" id="piconfig"></a>
Change your Raspberry Pi configuration.</h2>
<p>From the command line, run: </p><div class="fragment"><div class="line">sudo raspi-config</div></div><!-- fragment --><p>You can change a number of Raspberry Pi specific behaviours from this utility. You will probably want to 'Expand filesystem' (to make sure the entire SD card is available to you), 'Change user password', set the timezone (IMPORTANT) and from the 'Advanced options' screen, 'Set the hostname', 'Enable SSH' and 'Enable I2C'. The last option is dependant on the hardware you intend to attach to your device. If you have no intention of attaching a screen or monitor to your device, you can also allocate zero memory to the GPU.</p>
<h2><a class="anchor" id="pidev"></a>
Install software dependencies.</h2>
<p>From the command line run: </p><div class="fragment"><div class="line">sudo apt-<span class="keyword">get</span> install graphviz libavahi-compat-libdnssd-dev qt5-<span class="keywordflow">default</span> git-core upower libxml2-dev consolekit libssl-dev libavformat-dev</div></div><!-- fragment --><h2><a class="anchor" id="piwiringpi"></a>
Install wiringPi.</h2>
<p><a class="el" href="d6/db6/class_torc.html">Torc</a> uses wiringPi to access the Raspberry Pi's GPIO pins and help with I2C communications. It is highly unlikely that you'll want to use <a class="el" href="d6/db6/class_torc.html">Torc</a> on a Pi without wiringPi. Full wiringPi instructions are available at the wiringPi <a href="http://wiringpi.com/download-and-install">project page</a>.</p>
<div class="fragment"><div class="line">cd ~</div><div class="line">git clone git:<span class="comment">//git.drogon.net/wiringPi</span></div><div class="line">cd wiringPi</div><div class="line">./build</div></div><!-- fragment --><h2><a class="anchor" id="pitorcinstall"></a>
Download and install Torc.</h2>
<dl class="section note"><dt>Note</dt><dd>This will take some time. Make a few cups of coffee... <div class="fragment"><div class="line">cd ~</div><div class="line">git clone https:<span class="comment">//github.com/mark-kendall/torc.git</span></div><div class="line">cd torc</div><div class="line">TORC_PI=<span class="keyword">true</span> qmake</div><div class="line">make -j2</div><div class="line">sudo make install</div></div><!-- fragment --></dd></dl>
<h2><a class="anchor" id="pi1wire"></a>
Enable 1Wire interface.</h2>
<p>The 1Wire interface is primarily used for communicating with MAXIM DS18B20 1Wire digital thermometers - which are also available as a waterproof module.</p>
<p>Add the following line to the end of '/boot/config.txt' file (sudo nano /boot/config.txt) N.B. It may already be present if you enabled I2C from raspi-config. </p><div class="fragment"><div class="line">dtoverlay=w1-gpio</div></div><!-- fragment --><p>and these 2 lines to /etc/modules (sudo nano /etc/modules) </p><div class="fragment"><div class="line">w1-gpio</div><div class="line">w1-therm</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>If you enable w1-gpio support without adding the appropriate external hardware (i.e. a pull up resister), you may find the kernel tries to recognise a number of phantom 1Wire devices. Don't panic - but add the resistor.</dd></dl>
<h2><a class="anchor" id="pii2c"></a>
Enable I2C bus.</h2>
<h2><a class="anchor" id="pitime"></a>
Set time and timezone.</h2>
<h2><a class="anchor" id="pistart"></a>
Run Torc at startup.</h2>
<p>The 'misc' directory in the source contains a script to run <a class="el" href="d6/db6/class_torc.html">Torc</a> as a service. Details are included in the file.</p>
<h2><a class="anchor" id="Super"></a>
user permissions</h2>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 1 2018 19:48:44 for Torc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
