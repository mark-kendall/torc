<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Torc: torcnetworkedcontext.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Torc
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_19e1fafdf157c27762559b97f5d6a2d3.html">torc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">torcnetworkedcontext.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../de/d48/torcnetworkedcontext_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Class TorcNetworkedContext</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">* This file is part of the Torc project.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">* Copyright (C) Mark Kendall 2013-18</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">* This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">* it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">* the Free Software Foundation; either version 2 of the License, or</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">* (at your option) any later version.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">* This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">* but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">* GNU General Public License for more details.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">* You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">* along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">* Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">* USA.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// Torc</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/dd5/torcadminthread_8h.html">torcadminthread.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d5f/torclanguage_8h.html">torclanguage.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/da5/torcnetwork_8h.html">torcnetwork.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d53/torcbonjour_8h.html">torcbonjour.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d66/torcevent_8h.html">torcevent.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d1e/torcupnp_8h.html">upnp/torcupnp.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dbe/torcwebsocket_8h.html">torcwebsocket.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d52/torcrpcrequest_8h.html">torcrpcrequest.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d18/torcnetworkrequest_8h.html">torcnetworkrequest.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d9e/torcwebsocketthread_8h.html">torcwebsocketthread.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d1b/torchttpserver_8h.html">torchttpserver.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d9a/torcnetworkedcontext_8h.html">torcnetworkedcontext.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="../../d5/d9a/torcnetworkedcontext_8h.html#a1b38378b306e81b073443f73babdcc76">   37</a></span>&#160;<a class="code" href="../../d8/d93/class_torc_networked_context.html">TorcNetworkedContext</a> *<a class="code" href="../../de/d48/torcnetworkedcontext_8cpp.html#a1b38378b306e81b073443f73babdcc76">gNetworkedContext</a> = NULL;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#ac46ca13b41dd998cbcc891376241b07b">   45</a></span>&#160;<a class="code" href="../../dd/d3a/class_torc_network_service.html#ac46ca13b41dd998cbcc891376241b07b">TorcNetworkService::TorcNetworkService</a>(<span class="keyword">const</span> QString &amp;Name, <span class="keyword">const</span> QString &amp;UUID, <span class="keywordtype">int</span> Port,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                       <span class="keywordtype">bool</span> Secure, <span class="keyword">const</span> QList&lt;QHostAddress&gt; &amp;Addresses)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  : QObject(),</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    name(Name),</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    uuid(UUID),</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    port(Port),</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    host(),</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    secure(Secure),</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    uiAddress(QString()),</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    startTime(0),</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    priority(-1),</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    apiVersion(QString()),</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    connected(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a>),</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    m_sources(Spontaneous),</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    m_debugString(),</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    m_addresses(Addresses),</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    m_preferredAddressIndex(0),</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    m_abort(0),</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    m_getPeerDetailsRPC(NULL),</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    m_getPeerDetails(NULL),</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    m_webSocketThread(NULL),</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    m_retryScheduled(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a>),</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    m_retryInterval(10000)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_addresses.size(); ++i)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span> (m_addresses.at(i).protocol() == QAbstractSocket::IPv4Protocol)</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            m_preferredAddressIndex = i;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="../../dd/d3a/class_torc_network_service.html#a1a8392d5cdc31e1b705405c596911948">uiAddress</a> += <a class="code" href="../../d8/d73/class_torc_network.html#a97321aa2f3ccde2ae513cca94b277a85">TorcNetwork::IPAddressToLiteral</a>(m_addresses.at(i), <a class="code" href="../../dd/d3a/class_torc_network_service.html#a7067c651802f97b5d0760604a2ee1e6f">port</a>) + ((i == m_addresses.size() - 1) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span> (m_addresses.isEmpty())</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        m_debugString = <span class="stringliteral">&quot;No address found&quot;</span>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        m_debugString = <a class="code" href="../../d8/d73/class_torc_network.html#a97321aa2f3ccde2ae513cca94b277a85">TorcNetwork::IPAddressToLiteral</a>(m_addresses[m_preferredAddressIndex], <a class="code" href="../../dd/d3a/class_torc_network_service.html#a7067c651802f97b5d0760604a2ee1e6f">port</a>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    connect(<span class="keyword">this</span>, SIGNAL(<a class="code" href="../../dd/d3a/class_torc_network_service.html#a25801b8d95abe55ae17fc1fe38c71b97">TryConnect</a>()), <span class="keyword">this</span>, SLOT(<a class="code" href="../../dd/d3a/class_torc_network_service.html#a89de0c4ed54c528ef2814a8678588617">Connect</a>()));</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a180a9b49c7996e5d5ecc7db1570ec170">   96</a></span>&#160;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a180a9b49c7996e5d5ecc7db1570ec170">TorcNetworkService::~TorcNetworkService</a>()</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// cancel any outstanding requests</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    m_abort = 1;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (m_getPeerDetailsRPC &amp;&amp; m_webSocketThread)</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        m_webSocketThread-&gt;<a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html#a45f2d2ebd27a6a8dff7cb3948727d43a">CancelRequest</a>(m_getPeerDetailsRPC);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        m_getPeerDetailsRPC-&gt;<a class="code" href="../../d6/dad/class_torc_reference_counter.html#ae166de84902f0bd7b195ac2729cf50ac">DownRef</a>();</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        m_getPeerDetailsRPC = NULL;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (m_getPeerDetails)</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="../../d8/d73/class_torc_network.html#ae0a866ec6804a8c72cb5194449af0cfc">TorcNetwork::Cancel</a>(m_getPeerDetails);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        m_getPeerDetails-&gt;<a class="code" href="../../d6/dad/class_torc_reference_counter.html#ae166de84902f0bd7b195ac2729cf50ac">DownRef</a>();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        m_getPeerDetails = NULL;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// delete websocket</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (m_webSocketThread)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        m_webSocketThread-&gt;quit();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        m_webSocketThread-&gt;wait();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keyword">delete</span> m_webSocketThread;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        m_webSocketThread = NULL;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a88620f3f40edd32e3d57b4ec83e624ed">  132</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a88620f3f40edd32e3d57b4ec83e624ed">TorcNetworkService::WeActAsServer</a>(<span class="keywordtype">int</span> Priority, qint64 StartTime, <span class="keyword">const</span> QString &amp;UUID)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (Priority != <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d7/d17/class_torc_local_context.html#a6585544b1dd0f8ebb815ed3ad150a2cd">GetPriority</a>())</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">return</span> Priority &lt; gLocalContext-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a1fad6afac37fa79d828f0a566f9f703f">GetPriority</a>();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (StartTime != <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d7/d17/class_torc_local_context.html#a6b6b5cc4732fee612a1a5e3ebe2cfcf1">GetStartTime</a>())</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">return</span> StartTime &gt; <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d7/d17/class_torc_local_context.html#a6b6b5cc4732fee612a1a5e3ebe2cfcf1">GetStartTime</a>();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (UUID != <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d7/d17/class_torc_local_context.html#aa09db82a2aaa43aa08cef5f30d32e271">GetUuid</a>())</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">return</span> UUID &lt; gLocalContext-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">GetUuid</a>();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// at least both devices will try and connect...</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a89de0c4ed54c528ef2814a8678588617">  150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a89de0c4ed54c528ef2814a8678588617">TorcNetworkService::Connect</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// clear retry flag</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    m_retryScheduled = <span class="keyword">false</span>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// sanity check</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (m_addresses.isEmpty())</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;No valid peer addresses&quot;</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// NB all connection methods should now provide all necessary peer data. QueryPeerDetails should now be</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// redundant.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d3a/class_torc_network_service.html#acd948e7555de4aed5ea2dd506a84c27e">startTime</a> == 0 || <a class="code" href="../../dd/d3a/class_torc_network_service.html#a662346f88425e7097d6892a408bd3815">apiVersion</a>.isEmpty() || <a class="code" href="../../dd/d3a/class_torc_network_service.html#a801fca6a40184148b3dfae07cad9428d">priority</a> &lt; 0)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        QueryPeerDetails();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// already connected</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (m_webSocketThread)</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// notify the parent that the connection is complete</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (gNetworkedContext)</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            gNetworkedContext-&gt;<a class="code" href="../../d8/d93/class_torc_networked_context.html#a309349ee56ce295171794ff2af04b29b">Connected</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="../../dd/d3a/class_torc_network_service.html#a00ca27c971c48b597c6e776d28762e6f">connected</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a32f4c5f7c4e9dc64a46d75311bb14bcb">ConnectedChanged</a>();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d3a/class_torc_network_service.html#a88620f3f40edd32e3d57b4ec83e624ed">WeActAsServer</a>(<a class="code" href="../../dd/d3a/class_torc_network_service.html#a801fca6a40184148b3dfae07cad9428d">priority</a>, <a class="code" href="../../dd/d3a/class_torc_network_service.html#acd948e7555de4aed5ea2dd506a84c27e">startTime</a>, <a class="code" href="../../dd/d3a/class_torc_network_service.html#a75aafd9a77926767a20ea31eccfd9ef1">uuid</a>))</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Not connecting to %1 - we have priority&quot;</span>).arg(m_debugString));</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Trying to connect to %1&quot;</span>).arg(m_debugString));</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    m_webSocketThread = <span class="keyword">new</span> <a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a>(m_addresses.at(m_preferredAddressIndex), <a class="code" href="../../dd/d3a/class_torc_network_service.html#a7067c651802f97b5d0760604a2ee1e6f">port</a>, secure);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    connect(m_webSocketThread, SIGNAL(Finished()),           <span class="keyword">this</span>, SLOT(<a class="code" href="../../dd/d3a/class_torc_network_service.html#afd25142c31f11cadfdf1e452787132b7">Disconnected</a>()));</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    connect(m_webSocketThread, SIGNAL(ConnectionUpgraded()), <span class="keyword">this</span>, SLOT(<a class="code" href="../../dd/d3a/class_torc_network_service.html#afa117924386ea028a69d84b4af3f8371">Connected</a>()));</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    m_webSocketThread-&gt;start();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a28512ce77e7a85184c83ff5811c81dff">  198</a></span>&#160;QString <a class="code" href="../../dd/d3a/class_torc_network_service.html#a28512ce77e7a85184c83ff5811c81dff">TorcNetworkService::GetName</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a8425aa64fbe5fedfc525b5275d7ed6b2">name</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">  203</a></span>&#160;QString <a class="code" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">TorcNetworkService::GetUuid</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a75aafd9a77926767a20ea31eccfd9ef1">uuid</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a5cd008ace139c74408ee3504c410154b">  208</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a5cd008ace139c74408ee3504c410154b">TorcNetworkService::GetPort</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a7067c651802f97b5d0760604a2ee1e6f">port</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a804130bf9d844d49b38cecaf99ca533b">  213</a></span>&#160;QString <a class="code" href="../../dd/d3a/class_torc_network_service.html#a804130bf9d844d49b38cecaf99ca533b">TorcNetworkService::GetHost</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;{</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a27b682b8fbfa21fd14d3f2046bd35c44">host</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#aec5f348783c48be712f3583b1f1d877c">  218</a></span>&#160;QString <a class="code" href="../../dd/d3a/class_torc_network_service.html#aec5f348783c48be712f3583b1f1d877c">TorcNetworkService::GetAddress</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;{</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a1a8392d5cdc31e1b705405c596911948">uiAddress</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a2b15d2fffa678ea445f02917f81581ef">  223</a></span>&#160;qint64 <a class="code" href="../../dd/d3a/class_torc_network_service.html#a2b15d2fffa678ea445f02917f81581ef">TorcNetworkService::GetStartTime</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#acd948e7555de4aed5ea2dd506a84c27e">startTime</a>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a1fad6afac37fa79d828f0a566f9f703f">  228</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a1fad6afac37fa79d828f0a566f9f703f">TorcNetworkService::GetPriority</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a801fca6a40184148b3dfae07cad9428d">priority</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a04ac5e91dddb059a639ec7d954a5c40c">  233</a></span>&#160;QString <a class="code" href="../../dd/d3a/class_torc_network_service.html#a04ac5e91dddb059a639ec7d954a5c40c">TorcNetworkService::GetAPIVersion</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a662346f88425e7097d6892a408bd3815">apiVersion</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#aca9de3254f8849429a2ec2db842cd1c5">  238</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#aca9de3254f8849429a2ec2db842cd1c5">TorcNetworkService::GetConnected</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a00ca27c971c48b597c6e776d28762e6f">connected</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#afa117924386ea028a69d84b4af3f8371">  243</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#afa117924386ea028a69d84b4af3f8371">TorcNetworkService::Connected</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a> *thread = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a>*<span class="keyword">&gt;</span>(sender());</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (m_webSocketThread &amp;&amp; m_webSocketThread == thread)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Connection established with %1&quot;</span>).arg(m_debugString));</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a25801b8d95abe55ae17fc1fe38c71b97">TryConnect</a>();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Unknown WebSocket connected...&quot;</span>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#afd25142c31f11cadfdf1e452787132b7">  257</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#afd25142c31f11cadfdf1e452787132b7">TorcNetworkService::Disconnected</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a> *thread = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a>*<span class="keyword">&gt;</span>(sender());</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (m_webSocketThread &amp;&amp; m_webSocketThread == thread)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Connection with %1 closed&quot;</span>).arg(m_debugString));</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        m_webSocketThread-&gt;quit();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        m_webSocketThread-&gt;wait();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keyword">delete</span> m_webSocketThread;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        m_webSocketThread = NULL;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment">// try and reconnect. If this is a discovered service, the socket was probably closed</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="comment">// deliberately and this object is about to be deleted anyway.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        ScheduleRetry();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">// notify the parent</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">if</span> (gNetworkedContext)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            gNetworkedContext-&gt;<a class="code" href="../../d8/d93/class_torc_networked_context.html#a1ab8ad3e43dd9cee60363387b93b7040">Disconnected</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <a class="code" href="../../dd/d3a/class_torc_network_service.html#a00ca27c971c48b597c6e776d28762e6f">connected</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a32f4c5f7c4e9dc64a46d75311bb14bcb">ConnectedChanged</a>();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Unknown WebSocket disconnected...&quot;</span>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a69d3e22f4eab14c040182ee27a90eb2c">  287</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a69d3e22f4eab14c040182ee27a90eb2c">TorcNetworkService::RequestReady</a>(<a class="code" href="../../d3/ded/class_torc_network_request.html">TorcNetworkRequest</a> *Request)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (m_getPeerDetails &amp;&amp; (Request == m_getPeerDetails))</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        QJsonDocument jsonresult = QJsonDocument::fromJson(Request-&gt;<a class="code" href="../../d3/ded/class_torc_network_request.html#ab962586f6d5f42a2037dbc310128fa4b">GetBuffer</a>());</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        m_getPeerDetails-&gt;<a class="code" href="../../d6/dad/class_torc_reference_counter.html#ae166de84902f0bd7b195ac2729cf50ac">DownRef</a>();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        m_getPeerDetails = NULL;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span> (!jsonresult.isNull() &amp;&amp; jsonresult.isObject())</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            QJsonObject <span class="keywordtype">object</span> = jsonresult.object();</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.contains(<span class="stringliteral">&quot;details&quot;</span>))</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                QJsonObject   details   = <span class="keywordtype">object</span>[<span class="stringliteral">&quot;details&quot;</span>].toObject();</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                QJsonValueRef jpriority  = details[<span class="stringliteral">&quot;priority&quot;</span>];</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                QJsonValueRef jstarttime = details[<span class="stringliteral">&quot;starttime&quot;</span>];</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                QJsonValueRef jversion   = details[<span class="stringliteral">&quot;version&quot;</span>];</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keywordflow">if</span> (!jpriority.isNull() &amp;&amp; !jstarttime.isNull() &amp;&amp; !jversion.isNull())</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                    <a class="code" href="../../dd/d3a/class_torc_network_service.html#a662346f88425e7097d6892a408bd3815">apiVersion</a> = jversion.toString();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    <a class="code" href="../../dd/d3a/class_torc_network_service.html#a801fca6a40184148b3dfae07cad9428d">priority</a>   = (int)jpriority.toDouble();</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    <a class="code" href="../../dd/d3a/class_torc_network_service.html#acd948e7555de4aed5ea2dd506a84c27e">startTime</a>  = (qint64)jstarttime.toDouble();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a936eb2a055b180e50d591a3f78088d48">ApiVersionChanged</a>();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                    emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a7f9559ede249fc911df2b2ab6d2b9693">PriorityChanged</a>();</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#abd08fba2755b000758dbef83d18aac39">StartTimeChanged</a>();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a25801b8d95abe55ae17fc1fe38c71b97">TryConnect</a>();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Failed to retrieve peer information&quot;</span>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Failed to find &#39;details&#39; in peer response&quot;</span>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Error parsing API return - expecting JSON object&quot;</span>);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, QString(<span class="stringliteral">&quot;Response:\r\n%1&quot;</span>).arg(jsonresult.toJson().data()));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">// try again...</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        ScheduleRetry();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a302b0e265852bec6ed5729af11ce07dd">  341</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a69d3e22f4eab14c040182ee27a90eb2c">TorcNetworkService::RequestReady</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a> *Request)</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (!Request)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (Request == m_getPeerDetailsRPC)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        QString message;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordtype">int</span> state = m_getPeerDetailsRPC-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a9ae1b2648525d982113035df1bc54f4b">GetState</a>();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span> (state &amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202ab8772ec6531d6b7226bffeaf255fff44">TorcRPCRequest::TimedOut</a>)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            message = <span class="stringliteral">&quot;Timed out&quot;</span>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state &amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a1929f68c1017438cba7bdde26f09d5a4">TorcRPCRequest::Cancelled</a>)</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            message = <span class="stringliteral">&quot;Cancelled&quot;</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state &amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47">TorcRPCRequest::Errored</a>)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            QVariantMap map  = m_getPeerDetailsRPC-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a2900e3c051379c8086f9d23b1bae3450">GetReply</a>().toMap();</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            QVariant error = map[<span class="stringliteral">&quot;error&quot;</span>];</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">if</span> (error.type() == QVariant::Map)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                QVariantMap errors = error.toMap();</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                message = QString(<span class="stringliteral">&quot;&#39;%1&#39; (%2)&quot;</span>).arg(errors.value(<span class="stringliteral">&quot;message&quot;</span>).toString()).arg(errors.value(<span class="stringliteral">&quot;code&quot;</span>).toInt());</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state &amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a1a9c8600564e7cf6603486fdf936f8c2">TorcRPCRequest::ReplyReceived</a>)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordflow">if</span> (m_getPeerDetailsRPC-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a2900e3c051379c8086f9d23b1bae3450">GetReply</a>().type() == QVariant::Map)</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                QVariantMap map     = m_getPeerDetailsRPC-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a2900e3c051379c8086f9d23b1bae3450">GetReply</a>().toMap();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                QVariant vpriority  = map[<span class="stringliteral">&quot;priority&quot;</span>];</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                QVariant vstarttime = map[<span class="stringliteral">&quot;starttime&quot;</span>];</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                QVariant vversion   = map[<span class="stringliteral">&quot;version&quot;</span>];</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keywordflow">if</span> (!vpriority.isNull() &amp;&amp; !vstarttime.isNull() &amp;&amp; !vversion.isNull())</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    <a class="code" href="../../dd/d3a/class_torc_network_service.html#a662346f88425e7097d6892a408bd3815">apiVersion</a> = vversion.toString();</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    <a class="code" href="../../dd/d3a/class_torc_network_service.html#a801fca6a40184148b3dfae07cad9428d">priority</a>   = (int)vpriority.toDouble();</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    <a class="code" href="../../dd/d3a/class_torc_network_service.html#acd948e7555de4aed5ea2dd506a84c27e">startTime</a>  = (qint64)vstarttime.toDouble();</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a936eb2a055b180e50d591a3f78088d48">ApiVersionChanged</a>();</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                    emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a7f9559ede249fc911df2b2ab6d2b9693">PriorityChanged</a>();</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                    emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#abd08fba2755b000758dbef83d18aac39">StartTimeChanged</a>();</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    success = <span class="keyword">true</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                    message = <span class="stringliteral">&quot;Incomplete details&quot;</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                message = QString(<span class="stringliteral">&quot;Unexpected variant type %1&quot;</span>).arg(m_getPeerDetailsRPC-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a2900e3c051379c8086f9d23b1bae3450">GetReply</a>().type());</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">if</span> (!success)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, QString(<span class="stringliteral">&quot;Call to &#39;%1&#39; failed (%2)&quot;</span>).arg(m_getPeerDetailsRPC-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a7e895894a445761424d38c26366f2b51">GetMethod</a>()).arg(message));</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            ScheduleRetry();</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        m_getPeerDetailsRPC-&gt;<a class="code" href="../../d6/dad/class_torc_reference_counter.html#ae166de84902f0bd7b195ac2729cf50ac">DownRef</a>();</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        m_getPeerDetailsRPC = NULL;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">if</span> (success)</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, <span class="stringliteral">&quot;Reply received&quot;</span>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            emit <a class="code" href="../../dd/d3a/class_torc_network_service.html#a25801b8d95abe55ae17fc1fe38c71b97">TryConnect</a>();</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Unknown request ready&quot;</span>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="keywordtype">void</span> TorcNetworkService::ScheduleRetry(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (!m_retryScheduled)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        QTimer::singleShot(m_retryInterval, Qt::VeryCoarseTimer, <span class="keyword">this</span>, SLOT(<a class="code" href="../../dd/d3a/class_torc_network_service.html#a89de0c4ed54c528ef2814a8678588617">Connect</a>()));</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        m_retryScheduled = <span class="keyword">true</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keywordtype">void</span> TorcNetworkService::QueryPeerDetails(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;{</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// this is a private method only called from Connect. No need to validate m_addresses or current details.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (!m_webSocketThread)</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">if</span> (m_getPeerDetails)</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Already running GetDetails HTTP request&quot;</span>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, <span class="stringliteral">&quot;Querying peer details over HTTP&quot;</span>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        QUrl url;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        url.setScheme(secure ? <span class="stringliteral">&quot;https&quot;</span> : <span class="stringliteral">&quot;http&quot;</span>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        url.setPort(<a class="code" href="../../dd/d3a/class_torc_network_service.html#a7067c651802f97b5d0760604a2ee1e6f">port</a>);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        url.setHost(m_addresses[m_preferredAddressIndex].toString());</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        url.setPath(<span class="stringliteral">&quot;/services/GetDetails&quot;</span>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        QNetworkRequest networkrequest(url);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        networkrequest.setRawHeader(<span class="stringliteral">&quot;Accept&quot;</span>, <span class="stringliteral">&quot;application/json&quot;</span>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        m_getPeerDetails = <span class="keyword">new</span> <a class="code" href="../../d3/ded/class_torc_network_request.html">TorcNetworkRequest</a>(networkrequest, QNetworkAccessManager::GetOperation, 0, &amp;m_abort);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="../../d8/d73/class_torc_network.html#a85aa66ee263f16d0ce6b74b88d539afa">TorcNetwork::GetAsynchronous</a>(m_getPeerDetails, <span class="keyword">this</span>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// perform JSON-RPC call over socket</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> (m_getPeerDetailsRPC)</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Already running GetDetails RPC&quot;</span>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    m_getPeerDetailsRPC = <span class="keyword">new</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a>(<span class="stringliteral">&quot;/services/GetDetails&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="../../dd/d3a/class_torc_network_service.html#afb1c284aba9eb989e3dd8cb2fcf8a5bb">RemoteRequest</a>(m_getPeerDetailsRPC);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a1d2749b82a5a1c678a87c47ed18d6bb2">  471</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a1d2749b82a5a1c678a87c47ed18d6bb2">TorcNetworkService::SetWebSocketThread</a>(<a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a> *Thread)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span> (!Thread)</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// guard against incorrect use</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (m_webSocketThread)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Already have websocket - closing new socket&quot;</span>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        Thread-&gt;quit();</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// create the socket</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    m_webSocketThread = Thread;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    connect(m_webSocketThread, SIGNAL(Finished()), <span class="keyword">this</span>, SLOT(<a class="code" href="../../dd/d3a/class_torc_network_service.html#afd25142c31f11cadfdf1e452787132b7">Disconnected</a>()));</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#afb1c284aba9eb989e3dd8cb2fcf8a5bb">  489</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#afb1c284aba9eb989e3dd8cb2fcf8a5bb">TorcNetworkService::RemoteRequest</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a> *Request)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (!Request)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (m_webSocketThread)</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        m_webSocketThread-&gt;<a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html#a87e3907cde093f3ce04d38ad5a979cc6">RemoteRequest</a>(Request);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Cannot fulfill remote request - not connected&quot;</span>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        Request-&gt;<a class="code" href="../../d6/dad/class_torc_reference_counter.html#ae166de84902f0bd7b195ac2729cf50ac">DownRef</a>();</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#acaa95fb73973af6f39cbb14701273da4">  505</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#acaa95fb73973af6f39cbb14701273da4">TorcNetworkService::CancelRequest</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a> *Request)</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;{</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (!Request)</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (m_webSocketThread)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        m_webSocketThread-&gt;<a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html#a45f2d2ebd27a6a8dff7cb3948727d43a">CancelRequest</a>(Request);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Cannot cancel request - not connected&quot;</span>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;}</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a92840f962a273ef6ed1f1f4b23f4e254">  516</a></span>&#160;QVariant <a class="code" href="../../dd/d3a/class_torc_network_service.html#a92840f962a273ef6ed1f1f4b23f4e254">TorcNetworkService::ToMap</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    QVariantMap result;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    result.insert(<span class="stringliteral">&quot;name&quot;</span>,      <a class="code" href="../../dd/d3a/class_torc_network_service.html#a8425aa64fbe5fedfc525b5275d7ed6b2">name</a>);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    result.insert(<span class="stringliteral">&quot;uuid&quot;</span>,      <a class="code" href="../../dd/d3a/class_torc_network_service.html#a75aafd9a77926767a20ea31eccfd9ef1">uuid</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    result.insert(<span class="stringliteral">&quot;port&quot;</span>,      <a class="code" href="../../dd/d3a/class_torc_network_service.html#a7067c651802f97b5d0760604a2ee1e6f">port</a>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    result.insert(<span class="stringliteral">&quot;uiAddress&quot;</span>, <a class="code" href="../../dd/d3a/class_torc_network_service.html#a1a8392d5cdc31e1b705405c596911948">uiAddress</a>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    result.insert(<span class="stringliteral">&quot;address&quot;</span>,   m_addresses.isEmpty() ? <span class="stringliteral">&quot;INValid&quot;</span> : <a class="code" href="../../d8/d73/class_torc_network.html#a97321aa2f3ccde2ae513cca94b277a85">TorcNetwork::IPAddressToLiteral</a>(m_addresses[m_preferredAddressIndex], 0));</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    result.insert(<span class="stringliteral">&quot;host&quot;</span>,      <a class="code" href="../../dd/d3a/class_torc_network_service.html#a27b682b8fbfa21fd14d3f2046bd35c44">host</a>);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (secure)</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        result.insert(<span class="stringliteral">&quot;secure&quot;</span>, <span class="stringliteral">&quot;yes&quot;</span>);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a7e26a04cbaec3a57fea16c4be1dd93e3">  530</a></span>&#160;QList&lt;QHostAddress&gt; <a class="code" href="../../dd/d3a/class_torc_network_service.html#a7e26a04cbaec3a57fea16c4be1dd93e3">TorcNetworkService::GetAddresses</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;{</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">return</span> m_addresses;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a23c2aeb1c9fcee36eb1d96a9c0f27574">  535</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a23c2aeb1c9fcee36eb1d96a9c0f27574">TorcNetworkService::SetHost</a>(<span class="keyword">const</span> QString &amp;Host)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="../../dd/d3a/class_torc_network_service.html#a27b682b8fbfa21fd14d3f2046bd35c44">host</a> = Host;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    m_debugString = <a class="code" href="../../dd/d3a/class_torc_network_service.html#a27b682b8fbfa21fd14d3f2046bd35c44">host</a> + <span class="stringliteral">&quot;:&quot;</span> + QString::number(<a class="code" href="../../dd/d3a/class_torc_network_service.html#a7067c651802f97b5d0760604a2ee1e6f">port</a>);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a2a7d35f0cc0b39381331f796e164923c">  541</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a2a7d35f0cc0b39381331f796e164923c">TorcNetworkService::SetStartTime</a>(qint64 StartTime)</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="../../dd/d3a/class_torc_network_service.html#acd948e7555de4aed5ea2dd506a84c27e">startTime</a> = StartTime;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#af1aca4190257f3aa019bd70b3b67c121">  546</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#af1aca4190257f3aa019bd70b3b67c121">TorcNetworkService::SetPriority</a>(<span class="keywordtype">int</span> Priority)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;{</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="../../dd/d3a/class_torc_network_service.html#a801fca6a40184148b3dfae07cad9428d">priority</a> = Priority;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a1d7ab38727b3faea64b96e538458fbd9">  551</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a1d7ab38727b3faea64b96e538458fbd9">TorcNetworkService::SetAPIVersion</a>(<span class="keyword">const</span> QString &amp;Version)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;{</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="../../dd/d3a/class_torc_network_service.html#a662346f88425e7097d6892a408bd3815">apiVersion</a> = Version;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#aad6212ab590ee536c5ff3806ab939d74">  556</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#aad6212ab590ee536c5ff3806ab939d74">TorcNetworkService::SetSource</a>(<a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27">ServiceSource</a> Source)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;{</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    m_sources |= Source;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a3a1a0afcca47719a424296b8f1e62424">  561</a></span>&#160;TorcNetworkService::ServiceSources <a class="code" href="../../dd/d3a/class_torc_network_service.html#a3a1a0afcca47719a424296b8f1e62424">TorcNetworkService::GetSources</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;{</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">return</span> m_sources;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="../../dd/d3a/class_torc_network_service.html#a37699d493194c690cb75c11dde8bed82">  566</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d3a/class_torc_network_service.html#a37699d493194c690cb75c11dde8bed82">TorcNetworkService::RemoveSource</a>(<a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27">ServiceSource</a> Source)</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;{</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    m_sources &amp;= !Source;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="../../de/d48/torcnetworkedcontext_8cpp.html#a1c2ca65e5df29a89ba04a0ae398a7b6a">  571</a></span>&#160;<span class="preprocessor">#define BLACKLIST QString(&quot;submit,revert&quot;)</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a78433a0ec3933b65955dedcb5819d648">  588</a></span>&#160;<a class="code" href="../../d8/d93/class_torc_networked_context.html#a78433a0ec3933b65955dedcb5819d648">TorcNetworkedContext::TorcNetworkedContext</a>()</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  : QObject(),</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="../../d6/d70/class_torc_h_t_t_p_service.html">TorcHTTPService</a>(this, <span class="stringliteral">&quot;peers&quot;</span>, <span class="stringliteral">&quot;peers&quot;</span>, <a class="code" href="../../d8/d93/class_torc_networked_context.html">TorcNetworkedContext</a>::staticMetaObject, <a class="code" href="../../de/d48/torcnetworkedcontext_8cpp.html#a1c2ca65e5df29a89ba04a0ae398a7b6a">BLACKLIST</a>),</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    m_discoveredServices(),</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    m_discoveredServicesLock(QReadWriteLock::Recursive),</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    m_serviceList(),</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    peers()</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;{</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// listen for events</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d8/d49/class_torc_observable.html#a171edc659834e25af5862f84e514b215">AddObserver</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// connect signals</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    connect(<span class="keyword">this</span>, SIGNAL(<a class="code" href="../../d8/d93/class_torc_networked_context.html#ac782894caf7d76dc2aa0e7cc96dcfe98">NewRequest</a>(QString,<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a>*)), <span class="keyword">this</span>, SLOT(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a33463d29caf84a298bcd59ad2bbed93b">HandleNewRequest</a>(QString,<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a>*)));</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    connect(<span class="keyword">this</span>, SIGNAL(<a class="code" href="../../d8/d93/class_torc_networked_context.html#ac1195fce9bb52f24ba2f538d79eb3d07">RequestCancelled</a>(QString,<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a>*)), <span class="keyword">this</span>, SLOT(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a8d2380778bbb0b034c2f4ce3a52cdcb3">HandleCancelRequest</a>(QString,<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a>*)));</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    connect(<span class="keyword">this</span>, SIGNAL(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a6650bc690b7c7005f85af0249c22512d">NewPeer</a>(<a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a>*,QVariantMap)), <span class="keyword">this</span>, SLOT(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a5b7c7e5231278a03dd2ea8a674474c12">HandleNewPeer</a>(<a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a>*,QVariantMap)));</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// always create the global instance</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <a class="code" href="../../d0/d9f/class_torc_bonjour.html#ac6bee62b6cc7e5552c6c84270077c2a2">TorcBonjour::Instance</a>();</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// NB all searches are triggered from TorcHTTPServer</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#abfdd0b11b27eb436808b32080f3d2ef5">  610</a></span>&#160;<a class="code" href="../../d8/d93/class_torc_networked_context.html#abfdd0b11b27eb436808b32080f3d2ef5">TorcNetworkedContext::~TorcNetworkedContext</a>()</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// stoplistening</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d8/d49/class_torc_observable.html#afefd31617891afe709c8dc9d62368d5c">RemoveObserver</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        QWriteLocker locker(&amp;m_discoveredServicesLock);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">if</span> (!m_discoveredServices.isEmpty())</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Removing %1 discovered peers&quot;</span>).arg(m_discoveredServices.size()));</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">while</span> (!m_discoveredServices.isEmpty())</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keyword">delete</span> m_discoveredServices.takeLast();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#ae02280e890e62f10c5f96a61d56a19f7">  624</a></span>&#160;QString <a class="code" href="../../d8/d93/class_torc_networked_context.html#ae02280e890e62f10c5f96a61d56a19f7">TorcNetworkedContext::GetUIName</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;{</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> tr(<span class="stringliteral">&quot;Peers&quot;</span>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a64f219e583e2454d4f21e3b5124aa138">  629</a></span>&#160;QVariantList <a class="code" href="../../d8/d93/class_torc_networked_context.html#a64f219e583e2454d4f21e3b5124aa138">TorcNetworkedContext::GetPeers</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;{</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    QVariantList result;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    QReadLocker locker(&amp;m_discoveredServicesLock);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">foreach</span> (<a class="code" href="../../dd/d3a/class_torc_network_service.html">TorcNetworkService</a>* service, m_discoveredServices)</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        result.append(service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a92840f962a273ef6ed1f1f4b23f4e254">ToMap</a>());</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a309349ee56ce295171794ff2af04b29b">  640</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a309349ee56ce295171794ff2af04b29b">TorcNetworkedContext::Connected</a>(<a class="code" href="../../dd/d3a/class_torc_network_service.html">TorcNetworkService</a> *Peer)</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;{</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (!Peer)</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    emit <a class="code" href="../../d8/d93/class_torc_networked_context.html#a7f8eee3766155c3d0f63a255ddf5c447">PeerConnected</a>(Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a28512ce77e7a85184c83ff5811c81dff">GetName</a>(), Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">GetUuid</a>());</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a1ab8ad3e43dd9cee60363387b93b7040">  648</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a1ab8ad3e43dd9cee60363387b93b7040">TorcNetworkedContext::Disconnected</a>(<a class="code" href="../../dd/d3a/class_torc_network_service.html">TorcNetworkService</a> *Peer)</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;{</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (!Peer)</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    emit <a class="code" href="../../d8/d93/class_torc_networked_context.html#a6115383dac8ffffbc5e9bf7da177c577">PeerDisconnected</a>(Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a28512ce77e7a85184c83ff5811c81dff">GetName</a>(), Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">GetUuid</a>());</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">// we need to delete the service if it was not discovered (i.e. a disconnection means it went away</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// and we will receive no other notifications).</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    Remove(Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">GetUuid</a>());</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">  660</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">TorcNetworkedContext::event</a>(QEvent *Event)</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;{</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> (Event-&gt;type() == <a class="code" href="../../d6/d78/class_torc_event.html#a3cae355e5cf80619e4370890e82d2a84">TorcEvent::TorcEventType</a>)</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="../../d6/d78/class_torc_event.html">TorcEvent</a> *<span class="keyword">event</span> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/d78/class_torc_event.html">TorcEvent</a>*<span class="keyword">&gt;</span>(Event);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a> &amp;&amp; (<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;GetEvent() == <a class="code" href="../../d6/db6/class_torc.html#ae24951db8926b98a75762aef8448e473a523a01f7afe6f38dcf15963fb967d8ab">Torc::ServiceDiscovered</a> || <span class="keyword">event</span>-&gt;GetEvent() == <a class="code" href="../../d6/db6/class_torc.html#ae24951db8926b98a75762aef8448e473aec50861553c03287693438ea703b12cf">Torc::ServiceWentAway</a>))</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().contains(<span class="stringliteral">&quot;txtrecords&quot;</span>))</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="comment">// txtrecords is Bonjour specific</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                QMap&lt;QByteArray,QByteArray&gt; records = <a class="code" href="../../d0/d9f/class_torc_bonjour.html#a6d602ba5fb9021f2cb7be12ecc90e70a">TorcBonjour::TxtRecordToMap</a>(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().value(<span class="stringliteral">&quot;txtrecords&quot;</span>).toByteArray());</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <span class="keywordflow">if</span> (records.contains(<span class="stringliteral">&quot;uuid&quot;</span>))</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    QByteArray uuid  = records.value(<span class="stringliteral">&quot;uuid&quot;</span>);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;GetEvent() == <a class="code" href="../../d6/db6/class_torc.html#ae24951db8926b98a75762aef8448e473a523a01f7afe6f38dcf15963fb967d8ab">Torc::ServiceDiscovered</a>)</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                    {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        <span class="keywordflow">if</span> (uuid == <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d7/d17/class_torc_local_context.html#aa09db82a2aaa43aa08cef5f30d32e271">GetUuid</a>().toLatin1())</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                        {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                            <span class="comment">// this is our own external Bonjour host name</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                            <a class="code" href="../../d8/d73/class_torc_network.html#a2621c859447922438e43819f71ecf380">TorcNetwork::AddHostName</a>(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().value(<span class="stringliteral">&quot;host&quot;</span>).toString());</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                        }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_serviceList.contains(uuid))</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                        {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                            <span class="comment">// register this as an additional source</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                            QWriteLocker locker(&amp;m_discoveredServicesLock);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_discoveredServices.size(); ++i)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                                <span class="keywordflow">if</span> (m_discoveredServices.at(i)-&gt;GetUuid() == uuid)</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                                    m_discoveredServices.at(i)-&gt;SetSource(<a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27aac5e6293ba151b03ed7fd0146c5246ad">TorcNetworkService::Bonjour</a>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                        {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                            QStringList addresses = <span class="keyword">event</span>-&gt;Data().value(<span class="stringliteral">&quot;addresses&quot;</span>).toStringList();</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                            QList&lt;QHostAddress&gt; hosts;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                            <span class="keywordflow">foreach</span> (QString address, addresses)</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                            {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                                <span class="comment">// filter out link local addresses for external peers that have network problems...</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                <span class="comment">// but allow loopback addresses for other Torc instances running on the same device...</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                QHostAddress hostaddress(address);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d73/class_torc_network.html#abfa4272255a3ef40373868c06c7479af">TorcNetwork::IsExternal</a>(hostaddress) &amp;&amp; !hostaddress.isLoopback())</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Ignoring peer address &#39;%1&#39; - address is unreachable&quot;</span>).arg(address));</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                                }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                <span class="keywordflow">else</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                    hosts.append(QHostAddress(address));</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                                }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                            }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                            QString host = <span class="keyword">event</span>-&gt;Data().value(<span class="stringliteral">&quot;host&quot;</span>).toString();</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                            <span class="keywordflow">if</span> (hosts.isEmpty())</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                            {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                                <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_WARNING, QString(<span class="stringliteral">&quot;Ignoring peer &#39;%1&#39; - no useable network addresses.&quot;</span>).arg(host));</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                            }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                            <span class="keywordflow">else</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                            {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                QString name = <span class="keyword">event</span>-&gt;Data().value(<span class="stringliteral">&quot;name&quot;</span>).toString();</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                QByteArray txtrecords = <span class="keyword">event</span>-&gt;Data().value(<span class="stringliteral">&quot;txtrecords&quot;</span>).toByteArray();</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                                QMap&lt;QByteArray,QByteArray&gt; map = <a class="code" href="../../d0/d9f/class_torc_bonjour.html#a6d602ba5fb9021f2cb7be12ecc90e70a">TorcBonjour::TxtRecordToMap</a>(txtrecords);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                QString version       = QString(map.value(<span class="stringliteral">&quot;apiversion&quot;</span>));</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                qint64 starttime      = map.value(<span class="stringliteral">&quot;starttime&quot;</span>).toULongLong();</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                                <span class="keywordtype">int</span> priority          = map.value(<span class="stringliteral">&quot;priority&quot;</span>).toInt();</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                                <span class="keywordtype">bool</span> secure           = map.contains(<span class="stringliteral">&quot;secure&quot;</span>);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                <span class="comment">// create the new peer</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                <a class="code" href="../../dd/d3a/class_torc_network_service.html">TorcNetworkService</a> *service = <span class="keyword">new</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a497f8d72418d597a9f55c1e54612a8b8">TorcNetworkService</a>(name, uuid, <a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().value(<span class="stringliteral">&quot;port&quot;</span>).toInt(),</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                                                                                     secure, hosts);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a1d7ab38727b3faea64b96e538458fbd9">SetAPIVersion</a>(version);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                                service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#af1aca4190257f3aa019bd70b3b67c121">SetPriority</a>(priority);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a2a7d35f0cc0b39381331f796e164923c">SetStartTime</a>(starttime);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                                service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a23c2aeb1c9fcee36eb1d96a9c0f27574">SetHost</a>(host);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#aad6212ab590ee536c5ff3806ab939d74">SetSource</a>(<a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27aac5e6293ba151b03ed7fd0146c5246ad">TorcNetworkService::Bonjour</a>);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                                <span class="comment">// and insert into the list model</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                Add(service);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                <span class="comment">// try and connect - the txt records should have given us everything we need to know</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                                emit service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a25801b8d95abe55ae17fc1fe38c71b97">TryConnect</a>();</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                            }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                        }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                    }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;GetEvent() == <a class="code" href="../../d6/db6/class_torc.html#ae24951db8926b98a75762aef8448e473aec50861553c03287693438ea703b12cf">Torc::ServiceWentAway</a>)</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                    {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                        <span class="keywordflow">if</span> (uuid == <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d7/d17/class_torc_local_context.html#aa09db82a2aaa43aa08cef5f30d32e271">GetUuid</a>().toLatin1())</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                            <a class="code" href="../../d8/d73/class_torc_network.html#a45672a9689c18dbe79ced3b04b515770">TorcNetwork::RemoveHostName</a>(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().value(<span class="stringliteral">&quot;host&quot;</span>).toString());</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                            Remove(uuid, <a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27aac5e6293ba151b03ed7fd0146c5246ad">TorcNetworkService::Bonjour</a>);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                    }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().contains(<span class="stringliteral">&quot;usn&quot;</span>))</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <span class="comment">// USN == Unique Service Name (UPnP)</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                QString usn      = <span class="keyword">event</span>-&gt;Data().value(<span class="stringliteral">&quot;usn&quot;</span>).toString();</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                QString uuid     = <a class="code" href="../../de/d6d/class_torc_u_p_n_p.html#af84429403e58c1e70a2bc4abfd7f1b73">TorcUPNP::UUIDFromUSN</a>(usn);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;GetEvent() == <a class="code" href="../../d6/db6/class_torc.html#ae24951db8926b98a75762aef8448e473aec50861553c03287693438ea703b12cf">Torc::ServiceWentAway</a>)</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    Remove(uuid, <a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27ae1a51b18f34654043563066b37c407ec">TorcNetworkService::UPnP</a>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;GetEvent() == <a class="code" href="../../d6/db6/class_torc.html#ae24951db8926b98a75762aef8448e473a523a01f7afe6f38dcf15963fb967d8ab">Torc::ServiceDiscovered</a>)</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    <span class="keywordflow">if</span> (uuid == <a class="code" href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a>-&gt;<a class="code" href="../../d7/d17/class_torc_local_context.html#aa09db82a2aaa43aa08cef5f30d32e271">GetUuid</a>().toLatin1())</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                        <span class="comment">// this is us!</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                    }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_serviceList.contains(uuid))</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                    {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                        <span class="comment">// register this as an additional source</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                        QWriteLocker locker(&amp;m_discoveredServicesLock);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_discoveredServices.size(); ++i)</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                            <span class="keywordflow">if</span> (m_discoveredServices.at(i)-&gt;GetUuid() == uuid)</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                                m_discoveredServices.at(i)-&gt;SetSource(<a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27ae1a51b18f34654043563066b37c407ec">TorcNetworkService::UPnP</a>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                    {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                        <span class="comment">// need name, uuid, port, hosts, apiversion, priority, starttime, host?</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                        QUrl location(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().value(<span class="stringliteral">&quot;address&quot;</span>).toString());</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                        QString name = <span class="keyword">event</span>-&gt;Data().value(<span class="stringliteral">&quot;name&quot;</span>).toString();</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                        <span class="keywordtype">bool</span> secure = <span class="keyword">event</span>-&gt;Data().contains(<span class="stringliteral">&quot;secure&quot;</span>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                        QList&lt;QHostAddress&gt; hosts;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                        hosts &lt;&lt; QHostAddress(location.host());</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                        <a class="code" href="../../dd/d3a/class_torc_network_service.html">TorcNetworkService</a> *service = <span class="keyword">new</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a497f8d72418d597a9f55c1e54612a8b8">TorcNetworkService</a>(name, uuid, location.port(), secure, hosts);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                        service-&gt;SetAPIVersion(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().value(<span class="stringliteral">&quot;apiversion&quot;</span>).toString());</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                        service-&gt;SetPriority(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().value(<span class="stringliteral">&quot;priority&quot;</span>).toInt());</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                        service-&gt;SetStartTime(<a class="code" href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">event</a>-&gt;Data().value(<span class="stringliteral">&quot;starttime&quot;</span>).toULongLong());</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                        service-&gt;SetHost(location.host());</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                        service-&gt;SetSource(<a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27ae1a51b18f34654043563066b37c407ec">TorcNetworkService::UPnP</a>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                        Add(service);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                        emit service-&gt;TryConnect();</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                    }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">return</span> QObject::event(Event);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a7f8eee3766155c3d0f63a255ddf5c447">  807</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a7f8eee3766155c3d0f63a255ddf5c447">TorcNetworkedContext::PeerConnected</a>(<a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a>* Thread, <span class="keyword">const</span> QVariantMap &amp; Data)</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;{</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">if</span> (!Thread)</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (!gNetworkedContext)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Upgrade request but no TorcNetworkedContext singleton&quot;</span>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// and create the WebSocket in the correct thread</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    emit gNetworkedContext-&gt;<a class="code" href="../../d8/d93/class_torc_networked_context.html#a6650bc690b7c7005f85af0249c22512d">NewPeer</a>(Thread, Data);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a13932bf0310464a709a224e9e485c478">  823</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a13932bf0310464a709a224e9e485c478">TorcNetworkedContext::RemoteRequest</a>(<span class="keyword">const</span> QString &amp;UUID, <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a> *Request)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;{</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">if</span> (!Request || UUID.isEmpty())</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span> (!gNetworkedContext)</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;RemoteRequest but no TorcNetworkedContext singleton&quot;</span>);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    emit gNetworkedContext-&gt;<a class="code" href="../../d8/d93/class_torc_networked_context.html#ac782894caf7d76dc2aa0e7cc96dcfe98">NewRequest</a>(UUID, Request);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#ae6bd1b9ef9be071b6c43da3ab40a5b21">  843</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#ae6bd1b9ef9be071b6c43da3ab40a5b21">TorcNetworkedContext::CancelRequest</a>(<span class="keyword">const</span> QString &amp;UUID, <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a> *Request, <span class="keywordtype">int</span> Wait <span class="comment">/* = 1000ms*/</span>)</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;{</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">if</span> (!Request || UUID.isEmpty())</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">if</span> (!gNetworkedContext)</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;CancelRequest but no TorcNetworkedContext singleton&quot;</span>);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">if</span> (Request &amp;&amp; !Request-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a3ddfd420e63d0f742b92456c00f1fca9">IsNotification</a>())</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        Request-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">AddState</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a1929f68c1017438cba7bdde26f09d5a4">TorcRPCRequest::Cancelled</a>);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        emit gNetworkedContext-&gt;<a class="code" href="../../d8/d93/class_torc_networked_context.html#ac1195fce9bb52f24ba2f538d79eb3d07">RequestCancelled</a>(UUID, Request);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">if</span> (Wait &gt; 0)</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">while</span> (Request-&gt;<a class="code" href="../../d6/dad/class_torc_reference_counter.html#a6f81bd851c3accb637ff9d11f4a861d9">IsShared</a>() &amp;&amp; (count++ &lt; Wait))</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                QThread::msleep(1);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="keywordflow">if</span> (Request-&gt;<a class="code" href="../../d6/dad/class_torc_reference_counter.html#a6f81bd851c3accb637ff9d11f4a861d9">IsShared</a>())</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Request is still shared after cancellation&quot;</span>);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a33463d29caf84a298bcd59ad2bbed93b">  871</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a33463d29caf84a298bcd59ad2bbed93b">TorcNetworkedContext::HandleNewRequest</a>(<span class="keyword">const</span> QString &amp;UUID, <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a> *Request)</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;{</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (!UUID.isEmpty() &amp;&amp; m_serviceList.contains(UUID))</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="comment">// no locking required - discovered services are changed in this thread.</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_discoveredServices.size(); ++i)</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="keywordflow">if</span> (m_discoveredServices[i]-&gt;GetUuid() == UUID)</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                m_discoveredServices[i]-&gt;RemoteRequest(Request);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_WARNING, QString(<span class="stringliteral">&quot;Connection identified by &#39;%1&#39; unknown&quot;</span>).arg(UUID));</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a8d2380778bbb0b034c2f4ce3a52cdcb3">  889</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a8d2380778bbb0b034c2f4ce3a52cdcb3">TorcNetworkedContext::HandleCancelRequest</a>(<span class="keyword">const</span> QString &amp;UUID, <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a> *Request)</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;{</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (!UUID.isEmpty() &amp;&amp; m_serviceList.contains(UUID))</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="comment">// no locking required - discovered services are changed in this thread.</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_discoveredServices.size(); ++i)</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordflow">if</span> (m_discoveredServices[i]-&gt;GetUuid() == UUID)</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                m_discoveredServices[i]-&gt;CancelRequest(Request);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_WARNING, QString(<span class="stringliteral">&quot;Connection identified by &#39;%1&#39; unknown&quot;</span>).arg(UUID));</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a541057397094d62fc9303eca50c0d0b7">  907</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a541057397094d62fc9303eca50c0d0b7">TorcNetworkedContext::SubscriberDeleted</a>(QObject *Subscriber)</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;{</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="../../d6/d70/class_torc_h_t_t_p_service.html#acd54087b95fabdfb71fb7e7e7ffa90c9">TorcHTTPService::HandleSubscriberDeleted</a>(Subscriber);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;}</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno"><a class="line" href="../../d8/d93/class_torc_networked_context.html#a5b7c7e5231278a03dd2ea8a674474c12">  912</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a5b7c7e5231278a03dd2ea8a674474c12">TorcNetworkedContext::HandleNewPeer</a>(<a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a> *Thread, <span class="keyword">const</span> QVariantMap &amp;Data)</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;{</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> (!Thread)</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    QString UUID       = Data.value(<span class="stringliteral">&quot;uuid&quot;</span>).toString();</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    QString name       = Data.value(<span class="stringliteral">&quot;name&quot;</span>).toString();</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordtype">int</span>     port       = Data.value(<span class="stringliteral">&quot;port&quot;</span>).toInt();</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    QString apiversion = Data.value(<span class="stringliteral">&quot;apiversion&quot;</span>).toString();</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordtype">int</span>     priority   = Data.value(<span class="stringliteral">&quot;priority&quot;</span>).toInt();</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    qint64  starttime  = Data.value(<span class="stringliteral">&quot;starttime&quot;</span>).toULongLong();</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    QHostAddress address(Data.value(<span class="stringliteral">&quot;address&quot;</span>).toString());</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">if</span> (UUID.isEmpty())</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    {</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Received WebSocket for peer without UUID (%1) - closing&quot;</span>).arg(name));</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        Thread-&gt;quit();</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">if</span> (m_serviceList.contains(UUID))</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">// no locking required - discovered services are changed in this thread.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_discoveredServices.size(); ++i)</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <span class="keywordflow">if</span> (m_discoveredServices[i]-&gt;GetUuid() == UUID &amp;&amp; !<a class="code" href="../../dd/d3a/class_torc_network_service.html#a88620f3f40edd32e3d57b4ec83e624ed">TorcNetworkService::WeActAsServer</a>(priority, starttime, UUID))</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Received unexpected WebSocket from peer &#39;%1&#39; (%2) - closing&quot;</span>)</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    .arg(m_discoveredServices[i]-&gt;GetName()).arg(UUID));</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                Thread-&gt;quit();</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        }</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a>* thread = <a class="code" href="../../db/dc7/class_torc_h_t_t_p_server.html#a2c2ecbf81f249258f519d479d86b0abb">TorcHTTPServer::TakeSocket</a>(Thread);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">if</span> (Thread == thread)</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    {</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Received WebSocket for new peer &#39;%1&#39; (%2)&quot;</span>).arg(name).arg(UUID));</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        QList&lt;QHostAddress&gt; addresses;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        addresses &lt;&lt; address;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <a class="code" href="../../dd/d3a/class_torc_network_service.html">TorcNetworkService</a> *service = <span class="keyword">new</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a497f8d72418d597a9f55c1e54612a8b8">TorcNetworkService</a>(name, UUID, port, Data.contains(<span class="stringliteral">&quot;secure&quot;</span>), addresses);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a1d2749b82a5a1c678a87c47ed18d6bb2">SetWebSocketThread</a>(thread);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a1d7ab38727b3faea64b96e538458fbd9">SetAPIVersion</a>(apiversion);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#af1aca4190257f3aa019bd70b3b67c121">SetPriority</a>(priority);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        service-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a2a7d35f0cc0b39381331f796e164923c">SetStartTime</a>(starttime);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        Add(service);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, QString(<span class="stringliteral">&quot;Failed to take ownership of WebSocket from %1&quot;</span>).arg(<a class="code" href="../../d8/d73/class_torc_network.html#a97321aa2f3ccde2ae513cca94b277a85">TorcNetwork::IPAddressToLiteral</a>(address, port)));</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="keywordtype">void</span> TorcNetworkedContext::Add(<a class="code" href="../../dd/d3a/class_torc_network_service.html">TorcNetworkService</a> *Peer)</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">if</span> (Peer &amp;&amp; !m_serviceList.contains(Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">GetUuid</a>()))</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            QWriteLocker locker(&amp;m_discoveredServicesLock);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            m_discoveredServices.append(Peer);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        }</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        m_serviceList.append(Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">GetUuid</a>());</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        emit <a class="code" href="../../d8/d93/class_torc_networked_context.html#ad8e77d5a05a792a83b45b6def3f2afca">PeersChanged</a>();</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;New Torc peer &#39;%1&#39; %2&quot;</span>).arg(Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#a28512ce77e7a85184c83ff5811c81dff">GetName</a>()).arg(Peer-&gt;<a class="code" href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">GetUuid</a>()));</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;}</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="keywordtype">void</span> TorcNetworkedContext::Remove(<span class="keyword">const</span> QString &amp;UUID, <a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27">TorcNetworkService::ServiceSource</a> Source)</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;{</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">if</span> (m_serviceList.contains(UUID))</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            QWriteLocker locker(&amp;m_discoveredServicesLock);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_discoveredServices.size(); ++i)</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                <span class="keywordflow">if</span> (m_discoveredServices.at(i)-&gt;GetUuid() == UUID)</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                    <span class="comment">// remove the source first - this acts as a form of reference counting</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                    m_discoveredServices.at(i)-&gt;RemoveSource(Source);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    <span class="comment">// don&#39;t delete if the service is still advertised by other means</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                    <span class="keywordflow">if</span> (m_discoveredServices.at(i)-&gt;GetSources() &gt; <a class="code" href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27a749aa511d9657a86dcc88e85b9cdebcf">TorcNetworkService::Spontaneous</a>)</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    <span class="comment">// remove the item</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    m_discoveredServices.takeAt(i)-&gt;deleteLater();</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        (void)m_serviceList.removeAll(UUID);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        emit <a class="code" href="../../d8/d93/class_torc_networked_context.html#ad8e77d5a05a792a83b45b6def3f2afca">PeersChanged</a>();</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, QString(<span class="stringliteral">&quot;Torc peer %1 went away&quot;</span>).arg(UUID));</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;}</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_torc_networked_context_object.html"> 1010</a></span>&#160;<span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="../../d8/d0c/class_torc_networked_context_object.html">TorcNetworkedContextObject</a> : <span class="keyword">public</span> <a class="code" href="../../d4/d75/class_torc_admin_object.html">TorcAdminObject</a>, <span class="keyword">public</span> <a class="code" href="../../d5/d29/class_torc_string_factory.html">TorcStringFactory</a></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;{</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_torc_networked_context_object.html#a6deb45c44d138557dc1546665c74d39d"> 1013</a></span>&#160;    <a class="code" href="../../d8/d0c/class_torc_networked_context_object.html#a6deb45c44d138557dc1546665c74d39d">TorcNetworkedContextObject</a>()</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      : <a class="code" href="../../d4/d75/class_torc_admin_object.html">TorcAdminObject</a>(<a class="code" href="../../dd/dd5/torcadminthread_8h.html#a696642a45ff8911013c31988aefbf03e">TORC_ADMIN_HIGH_PRIORITY</a> + 1 <span class="comment">/* start after network and before http server */</span>)</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        qRegisterMetaType&lt;TorcRPCRequest*&gt;();</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_torc_networked_context_object.html#a08271d8c4edce3144c7b343a160218ac"> 1019</a></span>&#160;    <a class="code" href="../../d8/d0c/class_torc_networked_context_object.html#a08271d8c4edce3144c7b343a160218ac">~TorcNetworkedContextObject</a>()</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        Destroy();</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_torc_networked_context_object.html#ac513a62338b91cfb418cbc9237295f51"> 1024</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d8/d0c/class_torc_networked_context_object.html#ac513a62338b91cfb418cbc9237295f51">GetStrings</a>(QVariantMap &amp;Strings)</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        Strings.insert(<span class="stringliteral">&quot;NoPeers&quot;</span>, QCoreApplication::translate(<span class="stringliteral">&quot;TorcNetworkedContext&quot;</span>, <span class="stringliteral">&quot;No other Torc devices detected&quot;</span>));</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="comment">// this is here to capture the plural translation</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        (void)QCoreApplication::translate(<span class="stringliteral">&quot;TorcNetworkedContext&quot;</span>, <span class="stringliteral">&quot;%n other Torc device(s) discovered&quot;</span>, NULL, 2);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div><div class="line"><a name="l01031"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_torc_networked_context_object.html#a8127806a430072e1c07c5e839cd05967"> 1031</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d8/d0c/class_torc_networked_context_object.html#a8127806a430072e1c07c5e839cd05967">Create</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        Destroy();</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        gNetworkedContext = <span class="keyword">new</span> <a class="code" href="../../d8/d93/class_torc_networked_context.html#a78433a0ec3933b65955dedcb5819d648">TorcNetworkedContext</a>();</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_torc_networked_context_object.html#afd9f136a8f8008acc960a24ab3deb174"> 1038</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d8/d0c/class_torc_networked_context_object.html#afd9f136a8f8008acc960a24ab3deb174">Destroy</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="keyword">delete</span> <a class="code" href="../../de/d48/torcnetworkedcontext_8cpp.html#a1b38378b306e81b073443f73babdcc76">gNetworkedContext</a>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        gNetworkedContext = NULL;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;} <a class="code" href="../../d8/d93/class_torc_networked_context.html#ac1e5a848335a80a214de9f21ef7e33d3">TorcNetworkedContextObject</a>;</div><div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47">TorcRPCRequest::Errored</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00024">torcrpcrequest.h:24</a></div></div>
<div class="ttc" id="class_torc_network_service_html_aad6212ab590ee536c5ff3806ab939d74"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#aad6212ab590ee536c5ff3806ab939d74">TorcNetworkService::SetSource</a></div><div class="ttdeci">void SetSource(ServiceSource Source)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00556">torcnetworkedcontext.cpp:556</a></div></div>
<div class="ttc" id="class_torc_html_ae24951db8926b98a75762aef8448e473a523a01f7afe6f38dcf15963fb967d8ab"><div class="ttname"><a href="../../d6/db6/class_torc.html#ae24951db8926b98a75762aef8448e473a523a01f7afe6f38dcf15963fb967d8ab">Torc::ServiceDiscovered</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbd/torclocalcontext_8h_source.html#l00062">torclocalcontext.h:62</a></div></div>
<div class="ttc" id="class_torc_network_service_html_acd948e7555de4aed5ea2dd506a84c27e"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#acd948e7555de4aed5ea2dd506a84c27e">TorcNetworkService::startTime</a></div><div class="ttdeci">qint64 startTime</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00045">torcnetworkedcontext.h:45</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a5b7c7e5231278a03dd2ea8a674474c12"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a5b7c7e5231278a03dd2ea8a674474c12">TorcNetworkedContext::HandleNewPeer</a></div><div class="ttdeci">void HandleNewPeer(TorcWebSocketThread *Thread, const QVariantMap &amp;Data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00912">torcnetworkedcontext.cpp:912</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a88620f3f40edd32e3d57b4ec83e624ed"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a88620f3f40edd32e3d57b4ec83e624ed">TorcNetworkService::WeActAsServer</a></div><div class="ttdeci">static bool WeActAsServer(int Priority, qint64 StartTime, const QString &amp;UUID)</div><div class="ttdoc">Determine whether we (the local device) should be the server for peer to peer communications. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00132">torcnetworkedcontext.cpp:132</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a1d7ab38727b3faea64b96e538458fbd9"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a1d7ab38727b3faea64b96e538458fbd9">TorcNetworkService::SetAPIVersion</a></div><div class="ttdeci">void SetAPIVersion(const QString &amp;Version)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00551">torcnetworkedcontext.cpp:551</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a541057397094d62fc9303eca50c0d0b7"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a541057397094d62fc9303eca50c0d0b7">TorcNetworkedContext::SubscriberDeleted</a></div><div class="ttdeci">void SubscriberDeleted(QObject *Subscriber)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00907">torcnetworkedcontext.cpp:907</a></div></div>
<div class="ttc" id="class_torc_network_service_html_afb1c284aba9eb989e3dd8cb2fcf8a5bb"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#afb1c284aba9eb989e3dd8cb2fcf8a5bb">TorcNetworkService::RemoteRequest</a></div><div class="ttdeci">void RemoteRequest(TorcRPCRequest *Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00489">torcnetworkedcontext.cpp:489</a></div></div>
<div class="ttc" id="class_torc_network_service_html_ac46ca13b41dd998cbcc891376241b07b"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#ac46ca13b41dd998cbcc891376241b07b">TorcNetworkService::TorcNetworkService</a></div><div class="ttdeci">TorcNetworkService(const QString &amp;Name, const QString &amp;UUID, int Port, bool Secure, const QList&lt; QHostAddress &gt; &amp;Addresses)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00045">torcnetworkedcontext.cpp:45</a></div></div>
<div class="ttc" id="class_torc_network_service_html_acbdb9dc111f48d47cc56a9ef0583e884"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#acbdb9dc111f48d47cc56a9ef0583e884">TorcNetworkService::GetUuid</a></div><div class="ttdeci">QString GetUuid(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00203">torcnetworkedcontext.cpp:203</a></div></div>
<div class="ttc" id="torclocalcontext_8cpp_html_a071080a60a9799e8b9609cb8898ef14f"><div class="ttname"><a href="../../da/d67/torclocalcontext_8cpp.html#a071080a60a9799e8b9609cb8898ef14f">gLocalContext</a></div><div class="ttdeci">TorcLocalContext * gLocalContext</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d67/torclocalcontext_8cpp_source.html#l00047">torclocalcontext.cpp:47</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a37699d493194c690cb75c11dde8bed82"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a37699d493194c690cb75c11dde8bed82">TorcNetworkService::RemoveSource</a></div><div class="ttdeci">void RemoveSource(ServiceSource Source)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00566">torcnetworkedcontext.cpp:566</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202a1929f68c1017438cba7bdde26f09d5a4"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a1929f68c1017438cba7bdde26f09d5a4">TorcRPCRequest::Cancelled</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00022">torcrpcrequest.h:22</a></div></div>
<div class="ttc" id="class_torc_u_p_n_p_html_af84429403e58c1e70a2bc4abfd7f1b73"><div class="ttname"><a href="../../de/d6d/class_torc_u_p_n_p.html#af84429403e58c1e70a2bc4abfd7f1b73">TorcUPNP::UUIDFromUSN</a></div><div class="ttdeci">static QString UUIDFromUSN(const QString &amp;USN)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/torcupnp_8cpp_source.html#l00060">torcupnp.cpp:60</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a28512ce77e7a85184c83ff5811c81dff"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a28512ce77e7a85184c83ff5811c81dff">TorcNetworkService::GetName</a></div><div class="ttdeci">QString GetName(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00198">torcnetworkedcontext.cpp:198</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a804130bf9d844d49b38cecaf99ca533b"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a804130bf9d844d49b38cecaf99ca533b">TorcNetworkService::GetHost</a></div><div class="ttdeci">QString GetHost(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00213">torcnetworkedcontext.cpp:213</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a00ca27c971c48b597c6e776d28762e6f"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a00ca27c971c48b597c6e776d28762e6f">TorcNetworkService::connected</a></div><div class="ttdeci">bool connected</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00048">torcnetworkedcontext.h:48</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202a1a9c8600564e7cf6603486fdf936f8c2"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a1a9c8600564e7cf6603486fdf936f8c2">TorcRPCRequest::ReplyReceived</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00021">torcrpcrequest.h:21</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a23c2aeb1c9fcee36eb1d96a9c0f27574"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a23c2aeb1c9fcee36eb1d96a9c0f27574">TorcNetworkService::SetHost</a></div><div class="ttdeci">void SetHost(const QString &amp;Host)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00535">torcnetworkedcontext.cpp:535</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a7e26a04cbaec3a57fea16c4be1dd93e3"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a7e26a04cbaec3a57fea16c4be1dd93e3">TorcNetworkService::GetAddresses</a></div><div class="ttdeci">QList&lt; QHostAddress &gt; GetAddresses(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00530">torcnetworkedcontext.cpp:530</a></div></div>
<div class="ttc" id="class_torc_admin_object_html"><div class="ttname"><a href="../../d4/d75/class_torc_admin_object.html">TorcAdminObject</a></div><div class="ttdoc">A factory class for automatically running objects outside of the main loop. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd5/torcadminthread_8h_source.html#l00028">torcadminthread.h:28</a></div></div>
<div class="ttc" id="class_torc_network_request_html"><div class="ttname"><a href="../../d3/ded/class_torc_network_request.html">TorcNetworkRequest</a></div><div class="ttdoc">A wrapper around QNetworkRequest. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d18/torcnetworkrequest_8h_source.html#l00010">torcnetworkrequest.h:10</a></div></div>
<div class="ttc" id="class_torc_network_html_a85aa66ee263f16d0ce6b74b88d539afa"><div class="ttname"><a href="../../d8/d73/class_torc_network.html#a85aa66ee263f16d0ce6b74b88d539afa">TorcNetwork::GetAsynchronous</a></div><div class="ttdeci">static bool GetAsynchronous(TorcNetworkRequest *Request, QObject *Parent)</div><div class="ttdoc">Queue an asynchronous HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9c/torcnetwork_8cpp_source.html#l00094">torcnetwork.cpp:94</a></div></div>
<div class="ttc" id="class_torc_html_ae24951db8926b98a75762aef8448e473aec50861553c03287693438ea703b12cf"><div class="ttname"><a href="../../d6/db6/class_torc.html#ae24951db8926b98a75762aef8448e473aec50861553c03287693438ea703b12cf">Torc::ServiceWentAway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbd/torclocalcontext_8h_source.html#l00063">torclocalcontext.h:63</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_ac1e5a848335a80a214de9f21ef7e33d3"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#ac1e5a848335a80a214de9f21ef7e33d3">TorcNetworkedContext::TorcNetworkedContextObject</a></div><div class="ttdeci">friend class TorcNetworkedContextObject</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00122">torcnetworkedcontext.h:122</a></div></div>
<div class="ttc" id="torcadminthread_8h_html"><div class="ttname"><a href="../../dd/dd5/torcadminthread_8h.html">torcadminthread.h</a></div></div>
<div class="ttc" id="class_torc_network_service_html_afd25142c31f11cadfdf1e452787132b7"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#afd25142c31f11cadfdf1e452787132b7">TorcNetworkService::Disconnected</a></div><div class="ttdeci">void Disconnected(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00257">torcnetworkedcontext.cpp:257</a></div></div>
<div class="ttc" id="torcrpcrequest_8h_html"><div class="ttname"><a href="../../dd/d52/torcrpcrequest_8h.html">torcrpcrequest.h</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a180a9b49c7996e5d5ecc7db1570ec170"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a180a9b49c7996e5d5ecc7db1570ec170">TorcNetworkService::~TorcNetworkService</a></div><div class="ttdeci">~TorcNetworkService()</div><div class="ttdoc">Destroy this service. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00096">torcnetworkedcontext.cpp:96</a></div></div>
<div class="ttc" id="class_torc_h_t_t_p_service_html"><div class="ttname"><a href="../../d6/d70/class_torc_h_t_t_p_service.html">TorcHTTPService</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dee/torchttpservice_8h_source.html#l00017">torchttpservice.h:17</a></div></div>
<div class="ttc" id="class_torc_local_context_html_aa09db82a2aaa43aa08cef5f30d32e271"><div class="ttname"><a href="../../d7/d17/class_torc_local_context.html#aa09db82a2aaa43aa08cef5f30d32e271">TorcLocalContext::GetUuid</a></div><div class="ttdeci">QString GetUuid(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d67/torclocalcontext_8cpp_source.html#l00492">torclocalcontext.cpp:492</a></div></div>
<div class="ttc" id="class_torc_network_html_a97321aa2f3ccde2ae513cca94b277a85"><div class="ttname"><a href="../../d8/d73/class_torc_network.html#a97321aa2f3ccde2ae513cca94b277a85">TorcNetwork::IPAddressToLiteral</a></div><div class="ttdeci">static QString IPAddressToLiteral(const QHostAddress &amp;Address, int Port, bool UseLocalhost=true)</div><div class="ttdoc">Convert an IP address to a string literal. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9c/torcnetwork_8cpp_source.html#l00196">torcnetwork.cpp:196</a></div></div>
<div class="ttc" id="torcnetworkedcontext_8cpp_html_a1b38378b306e81b073443f73babdcc76"><div class="ttname"><a href="../../de/d48/torcnetworkedcontext_8cpp.html#a1b38378b306e81b073443f73babdcc76">gNetworkedContext</a></div><div class="ttdeci">TorcNetworkedContext * gNetworkedContext</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00037">torcnetworkedcontext.cpp:37</a></div></div>
<div class="ttc" id="class_torc_network_service_html_ab5b2ad454d6bac7de21050e2df9d4a27"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27">TorcNetworkService::ServiceSource</a></div><div class="ttdeci">ServiceSource</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00026">torcnetworkedcontext.h:26</a></div></div>
<div class="ttc" id="class_torc_reference_counter_html_ae166de84902f0bd7b195ac2729cf50ac"><div class="ttname"><a href="../../d6/dad/class_torc_reference_counter.html#ae166de84902f0bd7b195ac2729cf50ac">TorcReferenceCounter::DownRef</a></div><div class="ttdeci">bool DownRef(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/torcreferencecounted_8cpp_source.html#l00057">torcreferencecounted.cpp:57</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_ac782894caf7d76dc2aa0e7cc96dcfe98"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#ac782894caf7d76dc2aa0e7cc96dcfe98">TorcNetworkedContext::NewRequest</a></div><div class="ttdeci">void NewRequest(const QString &amp;UUID, TorcRPCRequest *Request)</div></div>
<div class="ttc" id="class_torc_networked_context_html_a33463d29caf84a298bcd59ad2bbed93b"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a33463d29caf84a298bcd59ad2bbed93b">TorcNetworkedContext::HandleNewRequest</a></div><div class="ttdeci">void HandleNewRequest(const QString &amp;UUID, TorcRPCRequest *Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00871">torcnetworkedcontext.cpp:871</a></div></div>
<div class="ttc" id="class_torc_network_request_html_ab962586f6d5f42a2037dbc310128fa4b"><div class="ttname"><a href="../../d3/ded/class_torc_network_request.html#ab962586f6d5f42a2037dbc310128fa4b">TorcNetworkRequest::GetBuffer</a></div><div class="ttdeci">QByteArray &amp; GetBuffer(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcb/torcnetworkrequest_8cpp_source.html#l00399">torcnetworkrequest.cpp:399</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_aa0a87f4b77ef3e4942e972fbea7ca143"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">TorcRPCRequest::AddState</a></div><div class="ttdeci">void AddState(int State)</div><div class="ttdoc">Progress the state for this request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00387">torcrpcrequest.cpp:387</a></div></div>
<div class="ttc" id="torcnetworkrequest_8h_html"><div class="ttname"><a href="../../db/d18/torcnetworkrequest_8h.html">torcnetworkrequest.h</a></div></div>
<div class="ttc" id="torcadminthread_8h_html_a696642a45ff8911013c31988aefbf03e"><div class="ttname"><a href="../../dd/dd5/torcadminthread_8h.html#a696642a45ff8911013c31988aefbf03e">TORC_ADMIN_HIGH_PRIORITY</a></div><div class="ttdeci">#define TORC_ADMIN_HIGH_PRIORITY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd5/torcadminthread_8h_source.html#l00024">torcadminthread.h:24</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a6115383dac8ffffbc5e9bf7da177c577"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a6115383dac8ffffbc5e9bf7da177c577">TorcNetworkedContext::PeerDisconnected</a></div><div class="ttdeci">void PeerDisconnected(QString Name, QString UUID)</div></div>
<div class="ttc" id="class_torc_network_service_html_a89de0c4ed54c528ef2814a8678588617"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a89de0c4ed54c528ef2814a8678588617">TorcNetworkService::Connect</a></div><div class="ttdeci">void Connect(void)</div><div class="ttdoc">Establish a WebSocket connection to the peer if necessary. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00150">torcnetworkedcontext.cpp:150</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a8d2380778bbb0b034c2f4ce3a52cdcb3"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a8d2380778bbb0b034c2f4ce3a52cdcb3">TorcNetworkedContext::HandleCancelRequest</a></div><div class="ttdeci">void HandleCancelRequest(const QString &amp;UUID, TorcRPCRequest *Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00889">torcnetworkedcontext.cpp:889</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a></div><div class="ttdoc">A class encapsulating a Remote Procedure Call. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00014">torcrpcrequest.h:14</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a64f219e583e2454d4f21e3b5124aa138"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a64f219e583e2454d4f21e3b5124aa138">TorcNetworkedContext::GetPeers</a></div><div class="ttdeci">QVariantList GetPeers(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00629">torcnetworkedcontext.cpp:629</a></div></div>
<div class="ttc" id="class_torc_network_html_a2621c859447922438e43819f71ecf380"><div class="ttname"><a href="../../d8/d73/class_torc_network.html#a2621c859447922438e43819f71ecf380">TorcNetwork::AddHostName</a></div><div class="ttdeci">static void AddHostName(const QString &amp;Host)</div><div class="ttdoc">Register a known host name for this application. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9c/torcnetwork_8cpp_source.html#l00131">torcnetwork.cpp:131</a></div></div>
<div class="ttc" id="class_torc_network_service_html_ab5b2ad454d6bac7de21050e2df9d4a27aac5e6293ba151b03ed7fd0146c5246ad"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27aac5e6293ba151b03ed7fd0146c5246ad">TorcNetworkService::Bonjour</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00029">torcnetworkedcontext.h:29</a></div></div>
<div class="ttc" id="class_torc_networked_context_object_html_a6deb45c44d138557dc1546665c74d39d"><div class="ttname"><a href="../../d8/d0c/class_torc_networked_context_object.html#a6deb45c44d138557dc1546665c74d39d">TorcNetworkedContextObject::TorcNetworkedContextObject</a></div><div class="ttdeci">TorcNetworkedContextObject()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l01013">torcnetworkedcontext.cpp:1013</a></div></div>
<div class="ttc" id="class_torc_reference_counter_html_a6f81bd851c3accb637ff9d11f4a861d9"><div class="ttname"><a href="../../d6/dad/class_torc_reference_counter.html#a6f81bd851c3accb637ff9d11f4a861d9">TorcReferenceCounter::IsShared</a></div><div class="ttdeci">bool IsShared(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/torcreferencecounted_8cpp_source.html#l00078">torcreferencecounted.cpp:78</a></div></div>
<div class="ttc" id="class_torc_network_service_html_acaa95fb73973af6f39cbb14701273da4"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#acaa95fb73973af6f39cbb14701273da4">TorcNetworkService::CancelRequest</a></div><div class="ttdeci">void CancelRequest(TorcRPCRequest *Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00505">torcnetworkedcontext.cpp:505</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_ae6bd1b9ef9be071b6c43da3ab40a5b21"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#ae6bd1b9ef9be071b6c43da3ab40a5b21">TorcNetworkedContext::CancelRequest</a></div><div class="ttdeci">static void CancelRequest(const QString &amp;UUID, TorcRPCRequest *Request, int Wait=1000)</div><div class="ttdoc">Cancel Request associated with the connection identified by UUID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00843">torcnetworkedcontext.cpp:843</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a309349ee56ce295171794ff2af04b29b"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a309349ee56ce295171794ff2af04b29b">TorcNetworkedContext::Connected</a></div><div class="ttdeci">void Connected(TorcNetworkService *Peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00640">torcnetworkedcontext.cpp:640</a></div></div>
<div class="ttc" id="class_torc_network_service_html"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html">TorcNetworkService</a></div><div class="ttdoc">Encapsulates information on a discovered Torc peer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00020">torcnetworkedcontext.h:20</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_ae02280e890e62f10c5f96a61d56a19f7"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#ae02280e890e62f10c5f96a61d56a19f7">TorcNetworkedContext::GetUIName</a></div><div class="ttdeci">QString GetUIName(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00624">torcnetworkedcontext.cpp:624</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a7f8eee3766155c3d0f63a255ddf5c447"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a7f8eee3766155c3d0f63a255ddf5c447">TorcNetworkedContext::PeerConnected</a></div><div class="ttdeci">static void PeerConnected(TorcWebSocketThread *Thread, const QVariantMap &amp;Data)</div><div class="ttdoc">Respond to a valid WebSocket upgrade request and schedule creation of a WebSocket on the give QTcpSoc...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00807">torcnetworkedcontext.cpp:807</a></div></div>
<div class="ttc" id="torcupnp_8h_html"><div class="ttname"><a href="../../dd/d1e/torcupnp_8h.html">torcupnp.h</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a7e895894a445761424d38c26366f2b51"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a7e895894a445761424d38c26366f2b51">TorcRPCRequest::GetMethod</a></div><div class="ttdeci">QString GetMethod(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00432">torcrpcrequest.cpp:432</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a7f9559ede249fc911df2b2ab6d2b9693"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a7f9559ede249fc911df2b2ab6d2b9693">TorcNetworkService::PriorityChanged</a></div><div class="ttdeci">void PriorityChanged(void)</div></div>
<div class="ttc" id="class_torc_networked_context_html_a6650bc690b7c7005f85af0249c22512d"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a6650bc690b7c7005f85af0249c22512d">TorcNetworkedContext::NewPeer</a></div><div class="ttdeci">void NewPeer(TorcWebSocketThread *Socket, const QVariantMap &amp;Data)</div></div>
<div class="ttc" id="class_torc_networked_context_html_a4f1f2d32431c329a7d51092014c9a43f"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a4f1f2d32431c329a7d51092014c9a43f">TorcNetworkedContext::event</a></div><div class="ttdeci">bool event(QEvent *Event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00660">torcnetworkedcontext.cpp:660</a></div></div>
<div class="ttc" id="class_torc_network_service_html_af1aca4190257f3aa019bd70b3b67c121"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#af1aca4190257f3aa019bd70b3b67c121">TorcNetworkService::SetPriority</a></div><div class="ttdeci">void SetPriority(int Priority)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00546">torcnetworkedcontext.cpp:546</a></div></div>
<div class="ttc" id="class_torc_network_service_html_ab5b2ad454d6bac7de21050e2df9d4a27ae1a51b18f34654043563066b37c407ec"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27ae1a51b18f34654043563066b37c407ec">TorcNetworkService::UPnP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00030">torcnetworkedcontext.h:30</a></div></div>
<div class="ttc" id="class_torc_network_service_html_aca9de3254f8849429a2ec2db842cd1c5"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#aca9de3254f8849429a2ec2db842cd1c5">TorcNetworkService::GetConnected</a></div><div class="ttdeci">bool GetConnected(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00238">torcnetworkedcontext.cpp:238</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a2a7d35f0cc0b39381331f796e164923c"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a2a7d35f0cc0b39381331f796e164923c">TorcNetworkService::SetStartTime</a></div><div class="ttdeci">void SetStartTime(qint64 StartTime)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00541">torcnetworkedcontext.cpp:541</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a5cd008ace139c74408ee3504c410154b"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a5cd008ace139c74408ee3504c410154b">TorcNetworkService::GetPort</a></div><div class="ttdeci">int GetPort(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00208">torcnetworkedcontext.cpp:208</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a75aafd9a77926767a20ea31eccfd9ef1"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a75aafd9a77926767a20ea31eccfd9ef1">TorcNetworkService::uuid</a></div><div class="ttdeci">QString uuid</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00041">torcnetworkedcontext.h:41</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a8425aa64fbe5fedfc525b5275d7ed6b2"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a8425aa64fbe5fedfc525b5275d7ed6b2">TorcNetworkService::name</a></div><div class="ttdeci">QString name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00040">torcnetworkedcontext.h:40</a></div></div>
<div class="ttc" id="class_torc_networked_context_object_html_a08271d8c4edce3144c7b343a160218ac"><div class="ttname"><a href="../../d8/d0c/class_torc_networked_context_object.html#a08271d8c4edce3144c7b343a160218ac">TorcNetworkedContextObject::~TorcNetworkedContextObject</a></div><div class="ttdeci">~TorcNetworkedContextObject()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l01019">torcnetworkedcontext.cpp:1019</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202ab8772ec6531d6b7226bffeaf255fff44"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202ab8772ec6531d6b7226bffeaf255fff44">TorcRPCRequest::TimedOut</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00023">torcrpcrequest.h:23</a></div></div>
<div class="ttc" id="class_torc_event_html_a3cae355e5cf80619e4370890e82d2a84"><div class="ttname"><a href="../../d6/d78/class_torc_event.html#a3cae355e5cf80619e4370890e82d2a84">TorcEvent::TorcEventType</a></div><div class="ttdeci">static Type TorcEventType</div><div class="ttdoc">Register TorcEventType with QEvent. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/torcevent_8h_source.html#l00019">torcevent.h:19</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a7067c651802f97b5d0760604a2ee1e6f"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a7067c651802f97b5d0760604a2ee1e6f">TorcNetworkService::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00042">torcnetworkedcontext.h:42</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a9ae1b2648525d982113035df1bc54f4b"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a9ae1b2648525d982113035df1bc54f4b">TorcRPCRequest::GetState</a></div><div class="ttdeci">int GetState(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00422">torcrpcrequest.cpp:422</a></div></div>
<div class="ttc" id="class_torc_bonjour_html_a6d602ba5fb9021f2cb7be12ecc90e70a"><div class="ttname"><a href="../../d0/d9f/class_torc_bonjour.html#a6d602ba5fb9021f2cb7be12ecc90e70a">TorcBonjour::TxtRecordToMap</a></div><div class="ttdeci">static QMap&lt; QByteArray, QByteArray &gt; TxtRecordToMap(const QByteArray &amp;TxtRecord)</div><div class="ttdoc">Extracts a QMap from a properly formatted Bonjour Txt record. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/torcbonjourwindows_8cpp_source.html#l00074">torcbonjourwindows.cpp:74</a></div></div>
<div class="ttc" id="class_torc_h_t_t_p_service_html_acd54087b95fabdfb71fb7e7e7ffa90c9"><div class="ttname"><a href="../../d6/d70/class_torc_h_t_t_p_service.html#acd54087b95fabdfb71fb7e7e7ffa90c9">TorcHTTPService::HandleSubscriberDeleted</a></div><div class="ttdeci">void HandleSubscriberDeleted(QObject *Subscriber)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d77/torchttpservice_8cpp_source.html#l00882">torchttpservice.cpp:882</a></div></div>
<div class="ttc" id="class_torc_network_service_html_ab5b2ad454d6bac7de21050e2df9d4a27a749aa511d9657a86dcc88e85b9cdebcf"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#ab5b2ad454d6bac7de21050e2df9d4a27a749aa511d9657a86dcc88e85b9cdebcf">TorcNetworkService::Spontaneous</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00028">torcnetworkedcontext.h:28</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a04ac5e91dddb059a639ec7d954a5c40c"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a04ac5e91dddb059a639ec7d954a5c40c">TorcNetworkService::GetAPIVersion</a></div><div class="ttdeci">QString GetAPIVersion(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00233">torcnetworkedcontext.cpp:233</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a13932bf0310464a709a224e9e485c478"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a13932bf0310464a709a224e9e485c478">TorcNetworkedContext::RemoteRequest</a></div><div class="ttdeci">static void RemoteRequest(const QString &amp;UUID, TorcRPCRequest *Request)</div><div class="ttdoc">Pass Request to the remote connection identified by UUID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00823">torcnetworkedcontext.cpp:823</a></div></div>
<div class="ttc" id="torcloggingdefs_8h_html_a93519f65dd0ef21fc5be0c286a833ae4"><div class="ttname"><a href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a></div><div class="ttdeci">VERBOSE_PREAMBLE General info Playback related messages File and AutoExpire related messages Network protocol related messages Audio related messages JobQueue related messages EIT related messages DSMCC carousel related messages UPnP debugging messages xmltv output and related messages Media Manager debugging messages External executable related messages false</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d37/torcloggingdefs_8h_source.html#l00110">torcloggingdefs.h:110</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a3ddfd420e63d0f742b92456c00f1fca9"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a3ddfd420e63d0f742b92456c00f1fca9">TorcRPCRequest::IsNotification</a></div><div class="ttdeci">bool IsNotification(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00307">torcrpcrequest.cpp:307</a></div></div>
<div class="ttc" id="class_torc_networked_context_object_html_a8127806a430072e1c07c5e839cd05967"><div class="ttname"><a href="../../d8/d0c/class_torc_networked_context_object.html#a8127806a430072e1c07c5e839cd05967">TorcNetworkedContextObject::Create</a></div><div class="ttdeci">void Create(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l01031">torcnetworkedcontext.cpp:1031</a></div></div>
<div class="ttc" id="torcbonjour_8h_html"><div class="ttname"><a href="../../de/d53/torcbonjour_8h.html">torcbonjour.h</a></div></div>
<div class="ttc" id="class_torc_network_html_abfa4272255a3ef40373868c06c7479af"><div class="ttname"><a href="../../d8/d73/class_torc_network.html#abfa4272255a3ef40373868c06c7479af">TorcNetwork::IsExternal</a></div><div class="ttdeci">static bool IsExternal(const QHostAddress &amp;Address)</div><div class="ttdoc">Returns true if the address is accessible from other devices. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9c/torcnetwork_8cpp_source.html#l00222">torcnetwork.cpp:222</a></div></div>
<div class="ttc" id="class_torc_network_service_html_abd08fba2755b000758dbef83d18aac39"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#abd08fba2755b000758dbef83d18aac39">TorcNetworkService::StartTimeChanged</a></div><div class="ttdeci">void StartTimeChanged(void)</div></div>
<div class="ttc" id="torcnetwork_8h_html"><div class="ttname"><a href="../../da/da5/torcnetwork_8h.html">torcnetwork.h</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a32f4c5f7c4e9dc64a46d75311bb14bcb"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a32f4c5f7c4e9dc64a46d75311bb14bcb">TorcNetworkService::ConnectedChanged</a></div><div class="ttdeci">void ConnectedChanged(void)</div></div>
<div class="ttc" id="class_torc_network_service_html_a1fad6afac37fa79d828f0a566f9f703f"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a1fad6afac37fa79d828f0a566f9f703f">TorcNetworkService::GetPriority</a></div><div class="ttdeci">int GetPriority(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00228">torcnetworkedcontext.cpp:228</a></div></div>
<div class="ttc" id="torcwebsocket_8h_html"><div class="ttname"><a href="../../da/dbe/torcwebsocket_8h.html">torcwebsocket.h</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a78433a0ec3933b65955dedcb5819d648"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a78433a0ec3933b65955dedcb5819d648">TorcNetworkedContext::TorcNetworkedContext</a></div><div class="ttdeci">TorcNetworkedContext()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00588">torcnetworkedcontext.cpp:588</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_abfdd0b11b27eb436808b32080f3d2ef5"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#abfdd0b11b27eb436808b32080f3d2ef5">TorcNetworkedContext::~TorcNetworkedContext</a></div><div class="ttdeci">~TorcNetworkedContext()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00610">torcnetworkedcontext.cpp:610</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_ad8e77d5a05a792a83b45b6def3f2afca"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#ad8e77d5a05a792a83b45b6def3f2afca">TorcNetworkedContext::PeersChanged</a></div><div class="ttdeci">void PeersChanged(void)</div></div>
<div class="ttc" id="class_torc_network_service_html_a2b15d2fffa678ea445f02917f81581ef"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a2b15d2fffa678ea445f02917f81581ef">TorcNetworkService::GetStartTime</a></div><div class="ttdeci">qint64 GetStartTime(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00223">torcnetworkedcontext.cpp:223</a></div></div>
<div class="ttc" id="torclanguage_8h_html"><div class="ttname"><a href="../../dd/d5f/torclanguage_8h.html">torclanguage.h</a></div></div>
<div class="ttc" id="class_torc_bonjour_html_ac6bee62b6cc7e5552c6c84270077c2a2"><div class="ttname"><a href="../../d0/d9f/class_torc_bonjour.html#ac6bee62b6cc7e5552c6c84270077c2a2">TorcBonjour::Instance</a></div><div class="ttdeci">static TorcBonjour * Instance(void)</div><div class="ttdoc">Returns the global TorcBonjour singleton. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/torcbonjourwindows_8cpp_source.html#l00045">torcbonjourwindows.cpp:45</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a69d3e22f4eab14c040182ee27a90eb2c"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a69d3e22f4eab14c040182ee27a90eb2c">TorcNetworkService::RequestReady</a></div><div class="ttdeci">void RequestReady(TorcNetworkRequest *Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00287">torcnetworkedcontext.cpp:287</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a2900e3c051379c8086f9d23b1bae3450"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a2900e3c051379c8086f9d23b1bae3450">TorcRPCRequest::GetReply</a></div><div class="ttdeci">const QVariant &amp; GetReply(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00442">torcrpcrequest.cpp:442</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a92840f962a273ef6ed1f1f4b23f4e254"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a92840f962a273ef6ed1f1f4b23f4e254">TorcNetworkService::ToMap</a></div><div class="ttdeci">QVariant ToMap(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00516">torcnetworkedcontext.cpp:516</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a662346f88425e7097d6892a408bd3815"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a662346f88425e7097d6892a408bd3815">TorcNetworkService::apiVersion</a></div><div class="ttdeci">QString apiVersion</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00047">torcnetworkedcontext.h:47</a></div></div>
<div class="ttc" id="class_torc_networked_context_object_html_ac513a62338b91cfb418cbc9237295f51"><div class="ttname"><a href="../../d8/d0c/class_torc_networked_context_object.html#ac513a62338b91cfb418cbc9237295f51">TorcNetworkedContextObject::GetStrings</a></div><div class="ttdeci">void GetStrings(QVariantMap &amp;Strings)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l01024">torcnetworkedcontext.cpp:1024</a></div></div>
<div class="ttc" id="torcnetworkedcontext_8h_html"><div class="ttname"><a href="../../d5/d9a/torcnetworkedcontext_8h.html">torcnetworkedcontext.h</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a801fca6a40184148b3dfae07cad9428d"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a801fca6a40184148b3dfae07cad9428d">TorcNetworkService::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00046">torcnetworkedcontext.h:46</a></div></div>
<div class="ttc" id="class_torc_event_html"><div class="ttname"><a href="../../d6/d78/class_torc_event.html">TorcEvent</a></div><div class="ttdoc">A general purpose event object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/torcevent_8h_source.html#l00009">torcevent.h:9</a></div></div>
<div class="ttc" id="class_torc_network_service_html_aec5f348783c48be712f3583b1f1d877c"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#aec5f348783c48be712f3583b1f1d877c">TorcNetworkService::GetAddress</a></div><div class="ttdeci">QString GetAddress(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00218">torcnetworkedcontext.cpp:218</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a1d2749b82a5a1c678a87c47ed18d6bb2"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a1d2749b82a5a1c678a87c47ed18d6bb2">TorcNetworkService::SetWebSocketThread</a></div><div class="ttdeci">void SetWebSocketThread(TorcWebSocketThread *Thread)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00471">torcnetworkedcontext.cpp:471</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_a1ab8ad3e43dd9cee60363387b93b7040"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a1ab8ad3e43dd9cee60363387b93b7040">TorcNetworkedContext::Disconnected</a></div><div class="ttdeci">void Disconnected(TorcNetworkService *Peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00648">torcnetworkedcontext.cpp:648</a></div></div>
<div class="ttc" id="class_torc_web_socket_thread_html_a45f2d2ebd27a6a8dff7cb3948727d43a"><div class="ttname"><a href="../../d3/d5b/class_torc_web_socket_thread.html#a45f2d2ebd27a6a8dff7cb3948727d43a">TorcWebSocketThread::CancelRequest</a></div><div class="ttdeci">void CancelRequest(TorcRPCRequest *Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7c/torcwebsocketthread_8cpp_source.html#l00338">torcwebsocketthread.cpp:338</a></div></div>
<div class="ttc" id="class_torc_observable_html_a171edc659834e25af5862f84e514b215"><div class="ttname"><a href="../../d8/d49/class_torc_observable.html#a171edc659834e25af5862f84e514b215">TorcObservable::AddObserver</a></div><div class="ttdeci">void AddObserver(QObject *Observer)</div><div class="ttdoc">brief Register the given object to receive events. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d74/torcobservable_8cpp_source.html#l00051">torcobservable.cpp:51</a></div></div>
<div class="ttc" id="torcnetworkedcontext_8cpp_html_a1c2ca65e5df29a89ba04a0ae398a7b6a"><div class="ttname"><a href="../../de/d48/torcnetworkedcontext_8cpp.html#a1c2ca65e5df29a89ba04a0ae398a7b6a">BLACKLIST</a></div><div class="ttdeci">#define BLACKLIST</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00571">torcnetworkedcontext.cpp:571</a></div></div>
<div class="ttc" id="class_torc_string_factory_html"><div class="ttname"><a href="../../d5/d29/class_torc_string_factory.html">TorcStringFactory</a></div><div class="ttdoc">A factory class to register translatable strings for use with external interfaces/applications. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5f/torclanguage_8h_source.html#l00067">torclanguage.h:67</a></div></div>
<div class="ttc" id="torcwebsocketthread_8h_html"><div class="ttname"><a href="../../dd/d9e/torcwebsocketthread_8h.html">torcwebsocketthread.h</a></div></div>
<div class="ttc" id="torchttpserver_8h_html"><div class="ttname"><a href="../../df/d1b/torchttpserver_8h.html">torchttpserver.h</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a3a1a0afcca47719a424296b8f1e62424"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a3a1a0afcca47719a424296b8f1e62424">TorcNetworkService::GetSources</a></div><div class="ttdeci">ServiceSources GetSources(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00561">torcnetworkedcontext.cpp:561</a></div></div>
<div class="ttc" id="class_torc_network_html_ae0a866ec6804a8c72cb5194449af0cfc"><div class="ttname"><a href="../../d8/d73/class_torc_network.html#ae0a866ec6804a8c72cb5194449af0cfc">TorcNetwork::Cancel</a></div><div class="ttdeci">static void Cancel(TorcNetworkRequest *Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9c/torcnetwork_8cpp_source.html#l00073">torcnetwork.cpp:73</a></div></div>
<div class="ttc" id="class_torc_networked_context_object_html"><div class="ttname"><a href="../../d8/d0c/class_torc_networked_context_object.html">TorcNetworkedContextObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l01010">torcnetworkedcontext.cpp:1010</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a936eb2a055b180e50d591a3f78088d48"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a936eb2a055b180e50d591a3f78088d48">TorcNetworkService::ApiVersionChanged</a></div><div class="ttdeci">void ApiVersionChanged(void)</div></div>
<div class="ttc" id="class_torc_web_socket_thread_html"><div class="ttname"><a href="../../d3/d5b/class_torc_web_socket_thread.html">TorcWebSocketThread</a></div><div class="ttdoc">Wraps a TorcQThread around a TorcWebsocket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9e/torcwebsocketthread_8h_source.html#l00010">torcwebsocketthread.h:10</a></div></div>
<div class="ttc" id="class_torc_networked_context_object_html_afd9f136a8f8008acc960a24ab3deb174"><div class="ttname"><a href="../../d8/d0c/class_torc_networked_context_object.html#afd9f136a8f8008acc960a24ab3deb174">TorcNetworkedContextObject::Destroy</a></div><div class="ttdeci">void Destroy(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l01038">torcnetworkedcontext.cpp:1038</a></div></div>
<div class="ttc" id="class_torc_local_context_html_a6b6b5cc4732fee612a1a5e3ebe2cfcf1"><div class="ttname"><a href="../../d7/d17/class_torc_local_context.html#a6b6b5cc4732fee612a1a5e3ebe2cfcf1">TorcLocalContext::GetStartTime</a></div><div class="ttdeci">qint64 GetStartTime(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d67/torclocalcontext_8cpp_source.html#l00503">torclocalcontext.cpp:503</a></div></div>
<div class="ttc" id="class_torc_observable_html_afefd31617891afe709c8dc9d62368d5c"><div class="ttname"><a href="../../d8/d49/class_torc_observable.html#afefd31617891afe709c8dc9d62368d5c">TorcObservable::RemoveObserver</a></div><div class="ttdeci">void RemoveObserver(QObject *Observer)</div><div class="ttdoc">brief Deregister the given object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d74/torcobservable_8cpp_source.html#l00060">torcobservable.cpp:60</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a1a8392d5cdc31e1b705405c596911948"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a1a8392d5cdc31e1b705405c596911948">TorcNetworkService::uiAddress</a></div><div class="ttdeci">QString uiAddress</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00043">torcnetworkedcontext.h:43</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a27b682b8fbfa21fd14d3f2046bd35c44"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a27b682b8fbfa21fd14d3f2046bd35c44">TorcNetworkService::host</a></div><div class="ttdeci">QString host</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00044">torcnetworkedcontext.h:44</a></div></div>
<div class="ttc" id="class_torc_network_service_html_a25801b8d95abe55ae17fc1fe38c71b97"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#a25801b8d95abe55ae17fc1fe38c71b97">TorcNetworkService::TryConnect</a></div><div class="ttdeci">void TryConnect(void)</div></div>
<div class="ttc" id="class_torc_networked_context_html_a497f8d72418d597a9f55c1e54612a8b8"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#a497f8d72418d597a9f55c1e54612a8b8">TorcNetworkedContext::TorcNetworkService</a></div><div class="ttdeci">friend class TorcNetworkService</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00123">torcnetworkedcontext.h:123</a></div></div>
<div class="ttc" id="class_torc_h_t_t_p_server_html_a2c2ecbf81f249258f519d479d86b0abb"><div class="ttname"><a href="../../db/dc7/class_torc_h_t_t_p_server.html#a2c2ecbf81f249258f519d479d86b0abb">TorcHTTPServer::TakeSocket</a></div><div class="ttdeci">static TorcWebSocketThread * TakeSocket(TorcWebSocketThread *Socket)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/torchttpserver_8cpp_source.html#l00480">torchttpserver.cpp:480</a></div></div>
<div class="ttc" id="class_torc_network_html_a45672a9689c18dbe79ced3b04b515770"><div class="ttname"><a href="../../d8/d73/class_torc_network.html#a45672a9689c18dbe79ced3b04b515770">TorcNetwork::RemoveHostName</a></div><div class="ttdeci">static void RemoveHostName(const QString &amp;Host)</div><div class="ttdoc">Remove a host name from the known list of host names. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9c/torcnetwork_8cpp_source.html#l00159">torcnetwork.cpp:159</a></div></div>
<div class="ttc" id="torclogging_8h_html_a73a147108bf0df6442820b82b022ef94"><div class="ttname"><a href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a></div><div class="ttdeci">#define LOG(_MASK_, _LEVEL_, _FORMAT_,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df9/torclogging_8h_source.html#l00031">torclogging.h:31</a></div></div>
<div class="ttc" id="torcevent_8h_html"><div class="ttname"><a href="../../d3/d66/torcevent_8h.html">torcevent.h</a></div></div>
<div class="ttc" id="class_torc_networked_context_html_ac1195fce9bb52f24ba2f538d79eb3d07"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html#ac1195fce9bb52f24ba2f538d79eb3d07">TorcNetworkedContext::RequestCancelled</a></div><div class="ttdeci">void RequestCancelled(const QString &amp;UUID, TorcRPCRequest *Request)</div></div>
<div class="ttc" id="class_torc_local_context_html_a6585544b1dd0f8ebb815ed3ad150a2cd"><div class="ttname"><a href="../../d7/d17/class_torc_local_context.html#a6585544b1dd0f8ebb815ed3ad150a2cd">TorcLocalContext::GetPriority</a></div><div class="ttdeci">int GetPriority(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d67/torclocalcontext_8cpp_source.html#l00509">torclocalcontext.cpp:509</a></div></div>
<div class="ttc" id="class_torc_web_socket_thread_html_a87e3907cde093f3ce04d38ad5a979cc6"><div class="ttname"><a href="../../d3/d5b/class_torc_web_socket_thread.html#a87e3907cde093f3ce04d38ad5a979cc6">TorcWebSocketThread::RemoteRequest</a></div><div class="ttdeci">void RemoteRequest(TorcRPCRequest *Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7c/torcwebsocketthread_8cpp_source.html#l00333">torcwebsocketthread.cpp:333</a></div></div>
<div class="ttc" id="class_torc_network_service_html_afa117924386ea028a69d84b4af3f8371"><div class="ttname"><a href="../../dd/d3a/class_torc_network_service.html#afa117924386ea028a69d84b4af3f8371">TorcNetworkService::Connected</a></div><div class="ttdeci">void Connected(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/torcnetworkedcontext_8cpp_source.html#l00243">torcnetworkedcontext.cpp:243</a></div></div>
<div class="ttc" id="class_torc_networked_context_html"><div class="ttname"><a href="../../d8/d93/class_torc_networked_context.html">TorcNetworkedContext</a></div><div class="ttdoc">A class to discover and connect to other Torc applications. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9a/torcnetworkedcontext_8h_source.html#l00120">torcnetworkedcontext.h:120</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 14 2018 17:50:43 for Torc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
