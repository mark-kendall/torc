<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Torc: torcrpcrequest.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Torc
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_19e1fafdf157c27762559b97f5d6a2d3.html">torc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">torcrpcrequest.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d0/d89/torcrpcrequest_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Class TorcRPCRequest</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">* Copyright (C) Mark Kendall 2013-18</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">* This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">* it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">* the Free Software Foundation; either version 2 of the License, or</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">* (at your option) any later version.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">* This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">* but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">* GNU General Public License for more details.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">*</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">* You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">* along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Qt</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;QJsonArray&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;QJsonDocument&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Torc</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/df9/torclogging_8h.html">torclogging.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d1b/torchttpserver_8h.html">http/torchttpserver.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d52/torcrpcrequest_8h.html">torcrpcrequest.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#af52583bd0f2b2b01885337a25b1ed5b6">   47</a></span>&#160;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#af52583bd0f2b2b01885337a25b1ed5b6">TorcRPCRequest::TorcRPCRequest</a>(<span class="keyword">const</span> QString &amp;Method, QObject *Parent)</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  : m_authenticated(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a>),</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    m_notification(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a>),</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    m_state(None),</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    m_id(-1),</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    m_method(Method),</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    m_parent(nullptr),</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    m_parentLock(new QMutex()),</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    m_validParent(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a6bb428c1ccb88c717bfa26f1fcc7c33e">true</a>),</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    m_parameters(),</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    m_positionalParameters(),</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    m_serialisedData(),</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    m_reply()</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#acef8e89822b7adfdcd523916f8e251b5">SetParent</a>(Parent);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#aa4c0a9f8b3ba3be2239288abfb462699">   68</a></span>&#160;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#af52583bd0f2b2b01885337a25b1ed5b6">TorcRPCRequest::TorcRPCRequest</a>(<span class="keyword">const</span> QString &amp;Method)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  : m_authenticated(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a>),</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    m_notification(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a6bb428c1ccb88c717bfa26f1fcc7c33e">true</a>),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    m_state(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202ab80170a14817d4283563f0003f9b8ead">None</a>),</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    m_id(-1),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    m_method(Method),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    m_parent(nullptr),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    m_parentLock(new QMutex()),</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    m_validParent(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a>),</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    m_parameters(),</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    m_positionalParameters(),</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    m_serialisedData(),</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    m_reply()</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#af52583bd0f2b2b01885337a25b1ed5b6">TorcRPCRequest::TorcRPCRequest</a>(<span class="keyword">const</span> QJsonObject &amp;Object, QObject *Parent, <span class="keywordtype">bool</span> Authenticated)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  : m_authenticated(Authenticated),</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    m_notification(<span class="keyword">true</span>),</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    m_state(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202ab80170a14817d4283563f0003f9b8ead">None</a>),</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    m_id(-1),</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    m_method(),</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    m_parent(Parent),</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    m_parentLock(<span class="keyword">new</span> QMutex()),</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    m_validParent(<span class="keyword">false</span>),</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    m_parameters(),</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    m_positionalParameters(),</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    m_serialisedData(),</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    m_reply()</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    ParseJSONObject(Object);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#acf34be89bc8419b0f1b374aa6747b37a">  106</a></span>&#160;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#af52583bd0f2b2b01885337a25b1ed5b6">TorcRPCRequest::TorcRPCRequest</a>(<a class="code" href="../../d3/d9a/class_torc_web_socket_reader.html#a6c998b57e09ce050435169ced7f2dcd8">TorcWebSocketReader::WSSubProtocol</a> Protocol, <span class="keyword">const</span> QByteArray &amp;Data, QObject *Parent, <span class="keywordtype">bool</span> Authenticated)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  : m_authenticated(Authenticated),</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    m_notification(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a6bb428c1ccb88c717bfa26f1fcc7c33e">true</a>),</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    m_state(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202ab80170a14817d4283563f0003f9b8ead">None</a>),</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    m_id(-1),</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    m_method(),</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    m_parent(Parent),</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    m_parentLock(new QMutex()),</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    m_validParent(<a class="code" href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a>),</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    m_parameters(),</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    m_positionalParameters(),</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    m_serialisedData(),</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    m_reply()</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (Protocol != <a class="code" href="../../d3/d9a/class_torc_web_socket_reader.html#a6c998b57e09ce050435169ced7f2dcd8ac807614f4ebee06e2c4982dc1c96168f">TorcWebSocketReader::SubProtocolJSONRPC</a>)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Unknown websocket subprotocol&quot;</span>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// parse the JSON</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    QJsonDocument doc = QJsonDocument::fromJson(Data);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (doc.isNull())</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        ProcessNullContent(Data.contains(<span class="stringliteral">&quot;method&quot;</span>));</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_DEBUG, Data);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// single request, one JSON object</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (doc.isObject())</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        ParseJSONObject(doc.object());</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// batch call</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (doc.isArray())</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        ProcessBatchCall(doc.array());</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;TorcRPCRequest::~TorcRPCRequest()</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">delete</span> m_parentLock;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keywordtype">void</span> TorcRPCRequest::ProcessBatchCall(<span class="keyword">const</span> QJsonArray &amp;Array)</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    QJsonObject error;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    QJsonObject object;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;code&quot;</span>,    -32600);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;message&quot;</span>, QString(<span class="stringliteral">&quot;Invalid request&quot;</span>));</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    error.insert(<span class="stringliteral">&quot;error&quot;</span>,    <span class="keywordtype">object</span>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    error.insert(<span class="stringliteral">&quot;jsonrpc&quot;</span>,  QString(<span class="stringliteral">&quot;2.0&quot;</span>));</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    error.insert(<span class="stringliteral">&quot;id&quot;</span>,       QJsonValue());</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// an empty array is an error</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (Array.isEmpty())</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        m_serialisedData = QJsonDocument(error).toJson();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Invalid request - empty array&quot;</span>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// iterate over each member</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    QByteArray result;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    result.append(<span class="stringliteral">&quot;[\r\n&quot;</span>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">bool</span> empty = <span class="keyword">true</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    QJsonArray::const_iterator it = Array.constBegin();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">for</span> ( ; it != Array.constEnd(); ++it)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="comment">// must be an object</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span> (!(*it).isObject())</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Invalid request - not an object&quot;</span>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            result.append(QJsonDocument(error).toJson());</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">// process this object</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a> *request = <span class="keyword">new</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#af52583bd0f2b2b01885337a25b1ed5b6">TorcRPCRequest</a>((*it).toObject(), m_parent, m_authenticated);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (!request-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ab616c0fcb76ff53cb85b471078fbdebe">GetData</a>().isEmpty())</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">if</span> (empty)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                empty = <span class="keyword">false</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                result.append(<span class="stringliteral">&quot;,\r\n&quot;</span>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            result.append(request-&gt;<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ab616c0fcb76ff53cb85b471078fbdebe">GetData</a>());</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        request-&gt;<a class="code" href="../../d6/dad/class_torc_reference_counter.html#ae166de84902f0bd7b195ac2729cf50ac">DownRef</a>();</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    result.append(<span class="stringliteral">&quot;\r\n]&quot;</span>);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// don&#39;t return an empty array - which would/should be a group of notifications...</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (!empty)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        m_serialisedData = result;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keywordtype">void</span> TorcRPCRequest::ProcessNullContent(<span class="keywordtype">bool</span> HasMethod)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// NB we are acting as both client and server, hence if we receive invalid JSON (that Qt cannot parse)</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// we can only make a best efforts guess as to whether this was a request. Hence under</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// certain circumstances, we may not send the appropriate error message or respond at all.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (HasMethod)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        QJsonObject object;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        QJsonObject error;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        error.insert(<span class="stringliteral">&quot;code&quot;</span>, -32700);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        error.insert(<span class="stringliteral">&quot;message&quot;</span>, QString(<span class="stringliteral">&quot;Parse error&quot;</span>));</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;error&quot;</span>,   error);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;jsonrpc&quot;</span>, QString(<span class="stringliteral">&quot;2.0&quot;</span>));</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;id&quot;</span>,      QJsonValue());</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        m_serialisedData = QJsonDocument(<span class="keywordtype">object</span>).toJson();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_INFO, m_serialisedData);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Error parsing JSON-RPC data&quot;</span>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">AddState</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47">Errored</a>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keywordtype">void</span> TorcRPCRequest::ParseJSONObject(<span class="keyword">const</span> QJsonObject &amp;Object)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;{</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// determine whether this is a request or response</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">int</span>  <span class="keywordtype">id</span>        = (Object.contains(<span class="stringliteral">&quot;id&quot;</span>) &amp;&amp; !Object[<span class="stringliteral">&quot;id&quot;</span>].isNull()) ? (<span class="keywordtype">int</span>)Object[<span class="stringliteral">&quot;id&quot;</span>].toDouble() : -1;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordtype">bool</span> isrequest = Object.contains(<span class="stringliteral">&quot;method&quot;</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordtype">bool</span> isresult  = Object.contains(<span class="stringliteral">&quot;result&quot;</span>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">bool</span> iserror   = Object.contains(<span class="stringliteral">&quot;error&quot;</span>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)isrequest + (<span class="keywordtype">int</span>)isresult + (<span class="keywordtype">int</span>)iserror != 1)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Ambiguous RPC request/response&quot;</span>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">AddState</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47">Errored</a>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (isrequest)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        QString method = Object[<span class="stringliteral">&quot;method&quot;</span>].toString();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">// if this is a notification, check first whether it is a subscription &#39;event&#39; that the parent is monitoring</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordtype">bool</span> handled = <span class="keyword">false</span>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt; 0)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">if</span> (!QMetaObject::invokeMethod(m_parent, <span class="stringliteral">&quot;HandleNotification&quot;</span>, Qt::DirectConnection,</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                           Q_RETURN_ARG(<span class="keywordtype">bool</span>, handled), Q_ARG(QString, method)))</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Failed to invoke &#39;HandleNotification&#39; in request parent&quot;</span>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">if</span> (!handled)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            QVariantMap result = <a class="code" href="../../db/dc7/class_torc_h_t_t_p_server.html#adbbc7a6ee089b03b2871d0ad156cacbd">TorcHTTPServer::HandleRequest</a>(method, Object.value(<span class="stringliteral">&quot;params&quot;</span>).toVariant(), m_parent, m_authenticated);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">// not a notification, response expected</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt; -1)</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <span class="comment">// result should contain either &#39;result&#39; or &#39;error&#39;, we need to insert id and protocol identifier</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                result.insert(<span class="stringliteral">&quot;jsonrpc&quot;</span>, QString(<span class="stringliteral">&quot;2.0&quot;</span>));</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                result.insert(<span class="stringliteral">&quot;id&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                m_serialisedData = QJsonDocument::fromVariant(result).toJson();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Object.contains(<span class="stringliteral">&quot;id&quot;</span>))</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Request contains invalid id&quot;</span>);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isresult)</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        m_reply = Object.value(<span class="stringliteral">&quot;result&quot;</span>).toVariant();</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">AddState</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a12df07b10e140b8645fff37d633c4343">Result</a>);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        m_id = id;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span> (m_id &lt; 0)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Received result with no id&quot;</span>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">AddState</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47">Errored</a>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iserror)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">AddState</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47">Errored</a>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">AddState</a>(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a12df07b10e140b8645fff37d633c4343">Result</a>);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        m_id = id;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (m_id &lt; 0)</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Received error with no id&quot;</span>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;JSON-RPC error&quot;</span>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a3ddfd420e63d0f742b92456c00f1fca9">  306</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a3ddfd420e63d0f742b92456c00f1fca9">TorcRPCRequest::IsNotification</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> m_notification;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a773028b98957c57fbd235948e7e7685b">  312</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a773028b98957c57fbd235948e7e7685b">TorcRPCRequest::NotifyParent</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    QMutexLocker locker(m_parentLock);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (!m_parent || !m_validParent || m_state &amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a1929f68c1017438cba7bdde26f09d5a4">Cancelled</a>)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    QMetaObject::invokeMethod(m_parent, <span class="stringliteral">&quot;RequestReady&quot;</span>, Q_ARG(<a class="code" href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a>*, <span class="keyword">this</span>));</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#acef8e89822b7adfdcd523916f8e251b5">  327</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#acef8e89822b7adfdcd523916f8e251b5">TorcRPCRequest::SetParent</a>(QObject *Parent)</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;{</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    QMutexLocker locker(m_parentLock);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    m_parent = Parent;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    m_validParent = m_parent != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> (m_parent &amp;&amp; m_parent-&gt;metaObject()-&gt;indexOfMethod(QMetaObject::normalizedSignature(<span class="stringliteral">&quot;RequestReady(TorcRPCRequest*)&quot;</span>)) &lt; 0)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_GENERAL, LOG_ERR, <span class="stringliteral">&quot;Request&#39;s parent does not have RequestReady method - request WILL fail&quot;</span>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        m_validParent = <span class="keyword">false</span>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#aee839f1d92eb29217727a7a13ded7e24">  345</a></span>&#160;QByteArray&amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aee839f1d92eb29217727a7a13ded7e24">TorcRPCRequest::SerialiseRequest</a>(<a class="code" href="../../d3/d9a/class_torc_web_socket_reader.html#a6c998b57e09ce050435169ced7f2dcd8">TorcWebSocketReader::WSSubProtocol</a> Protocol)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (Protocol == <a class="code" href="../../d3/d9a/class_torc_web_socket_reader.html#a6c998b57e09ce050435169ced7f2dcd8ac807614f4ebee06e2c4982dc1c96168f">TorcWebSocketReader::SubProtocolJSONRPC</a>)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        QJsonObject object;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;jsonrpc&quot;</span>, QString(<span class="stringliteral">&quot;2.0&quot;</span>));</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;method&quot;</span>,  m_method);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="comment">// named paramaters are preferred over positional</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">if</span> (!m_parameters.isEmpty())</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            QJsonObject params;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_parameters.size(); ++i)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                params.insert(m_parameters[i].first, QJsonValue::fromVariant(m_parameters[i].second));</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;params&quot;</span>, params);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!m_positionalParameters.isEmpty())</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="comment">// NB positional parameters are serialised as an array (ordered)</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            QJsonArray params;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_positionalParameters.size(); ++i)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                params.append(QJsonValue::fromVariant(m_positionalParameters[i]));</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;params&quot;</span>, params);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">if</span> (m_id &gt; -1)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordtype">object</span>.insert(<span class="stringliteral">&quot;id&quot;</span>, m_id);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        QJsonDocument doc(<span class="keywordtype">object</span>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        m_serialisedData = doc.toJson();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a>(VB_NETWORK, LOG_DEBUG, m_serialisedData);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">return</span> m_serialisedData;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">  386</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">TorcRPCRequest::AddState</a>(<span class="keywordtype">int</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202">State</a>)</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    m_state |= <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202">State</a>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a865ef10756f640e86e9984a76904e307">  392</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a865ef10756f640e86e9984a76904e307">TorcRPCRequest::SetID</a>(<span class="keywordtype">int</span> ID)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    m_id = ID;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#aa6d7eb36c3c225a55510ef7b52c468ab">  402</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa6d7eb36c3c225a55510ef7b52c468ab">TorcRPCRequest::AddParameter</a>(<span class="keyword">const</span> QString &amp;Name, <span class="keyword">const</span> QVariant &amp;Value)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    m_parameters.append(QPair&lt;QString,QVariant&gt;(Name, Value));</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a75efcff7df233b3a3ac926c3dbcee6a4">  412</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a75efcff7df233b3a3ac926c3dbcee6a4">TorcRPCRequest::AddPositionalParameter</a>(<span class="keyword">const</span> QVariant &amp;Value)</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    m_positionalParameters.append(Value);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a4311922f02204d218df8293b28210ff5">  417</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a4311922f02204d218df8293b28210ff5">TorcRPCRequest::SetReply</a>(<span class="keyword">const</span> QVariant &amp;Reply)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    m_reply = Reply;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a9ae1b2648525d982113035df1bc54f4b">  422</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a9ae1b2648525d982113035df1bc54f4b">TorcRPCRequest::GetState</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">return</span> m_state;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#aa8b2f12e92f6a387ac0e30b02c2f5678">  427</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa8b2f12e92f6a387ac0e30b02c2f5678">TorcRPCRequest::GetID</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span> m_id;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a7e895894a445761424d38c26366f2b51">  432</a></span>&#160;QString <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a7e895894a445761424d38c26366f2b51">TorcRPCRequest::GetMethod</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> m_method;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a1c19367a0f47c85d3f3445cc885c0609">  437</a></span>&#160;QObject* <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a1c19367a0f47c85d3f3445cc885c0609">TorcRPCRequest::GetParent</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> m_parent;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a2900e3c051379c8086f9d23b1bae3450">  442</a></span>&#160;<span class="keyword">const</span> QVariant&amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a2900e3c051379c8086f9d23b1bae3450">TorcRPCRequest::GetReply</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> m_reply;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#a6a613dc8aba9beed46320ab9111f2c4c">  447</a></span>&#160;<span class="keyword">const</span> QList&lt;QPair&lt;QString,QVariant&gt; &gt;&amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#a6a613dc8aba9beed46320ab9111f2c4c">TorcRPCRequest::GetParameters</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">return</span> m_parameters;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#aa39c5e47b7f6b8fb35d3ddd9204c88ca">  452</a></span>&#160;<span class="keyword">const</span> QList&lt;QVariant&gt;&amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#aa39c5e47b7f6b8fb35d3ddd9204c88ca">TorcRPCRequest::GetPositionalParameters</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span> m_positionalParameters;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="../../db/dc6/class_torc_r_p_c_request.html#ab616c0fcb76ff53cb85b471078fbdebe">  457</a></span>&#160;QByteArray&amp; <a class="code" href="../../db/dc6/class_torc_r_p_c_request.html#ab616c0fcb76ff53cb85b471078fbdebe">TorcRPCRequest::GetData</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">return</span> m_serialisedData;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div><div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a8826cb17c25b80325860cbb0fbc4df47">TorcRPCRequest::Errored</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00024">torcrpcrequest.h:24</a></div></div>
<div class="ttc" id="class_torc_web_socket_reader_html_a6c998b57e09ce050435169ced7f2dcd8"><div class="ttname"><a href="../../d3/d9a/class_torc_web_socket_reader.html#a6c998b57e09ce050435169ced7f2dcd8">TorcWebSocketReader::WSSubProtocol</a></div><div class="ttdeci">WSSubProtocol</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/torcwebsocketreader_8h_source.html#l00064">torcwebsocketreader.h:64</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202a1929f68c1017438cba7bdde26f09d5a4"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a1929f68c1017438cba7bdde26f09d5a4">TorcRPCRequest::Cancelled</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00022">torcrpcrequest.h:22</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_af52583bd0f2b2b01885337a25b1ed5b6"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#af52583bd0f2b2b01885337a25b1ed5b6">TorcRPCRequest::TorcRPCRequest</a></div><div class="ttdeci">TorcRPCRequest(const QString &amp;Method, QObject *Parent)</div><div class="ttdoc">Creates an RPC request owned by the given Parent. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00047">torcrpcrequest.cpp:47</a></div></div>
<div class="ttc" id="torcloggingdefs_8h_html_a6bb428c1ccb88c717bfa26f1fcc7c33e"><div class="ttname"><a href="../../d1/d37/torcloggingdefs_8h.html#a6bb428c1ccb88c717bfa26f1fcc7c33e">true</a></div><div class="ttdeci">VERBOSE_PREAMBLE true</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d37/torcloggingdefs_8h_source.html#l00048">torcloggingdefs.h:48</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_ab616c0fcb76ff53cb85b471078fbdebe"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ab616c0fcb76ff53cb85b471078fbdebe">TorcRPCRequest::GetData</a></div><div class="ttdeci">QByteArray &amp; GetData(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00457">torcrpcrequest.cpp:457</a></div></div>
<div class="ttc" id="torcrpcrequest_8h_html"><div class="ttname"><a href="../../dd/d52/torcrpcrequest_8h.html">torcrpcrequest.h</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_aa8b2f12e92f6a387ac0e30b02c2f5678"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#aa8b2f12e92f6a387ac0e30b02c2f5678">TorcRPCRequest::GetID</a></div><div class="ttdeci">int GetID(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00427">torcrpcrequest.cpp:427</a></div></div>
<div class="ttc" id="class_torc_h_t_t_p_server_html_adbbc7a6ee089b03b2871d0ad156cacbd"><div class="ttname"><a href="../../db/dc7/class_torc_h_t_t_p_server.html#adbbc7a6ee089b03b2871d0ad156cacbd">TorcHTTPServer::HandleRequest</a></div><div class="ttdeci">static void HandleRequest(const QString &amp;PeerAddress, int PeerPort, const QString &amp;LocalAddress, int LocalPort, TorcHTTPRequest &amp;Request)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/torchttpserver_8cpp_source.html#l00127">torchttpserver.cpp:127</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_acef8e89822b7adfdcd523916f8e251b5"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#acef8e89822b7adfdcd523916f8e251b5">TorcRPCRequest::SetParent</a></div><div class="ttdeci">void SetParent(QObject *Parent)</div><div class="ttdoc">Set the parent for the request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00327">torcrpcrequest.cpp:327</a></div></div>
<div class="ttc" id="class_torc_reference_counter_html_ae166de84902f0bd7b195ac2729cf50ac"><div class="ttname"><a href="../../d6/dad/class_torc_reference_counter.html#ae166de84902f0bd7b195ac2729cf50ac">TorcReferenceCounter::DownRef</a></div><div class="ttdeci">virtual bool DownRef(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/torcreferencecounted_8cpp_source.html#l00051">torcreferencecounted.cpp:51</a></div></div>
<div class="ttc" id="torclogging_8h_html"><div class="ttname"><a href="../../d4/df9/torclogging_8h.html">torclogging.h</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_aa0a87f4b77ef3e4942e972fbea7ca143"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#aa0a87f4b77ef3e4942e972fbea7ca143">TorcRPCRequest::AddState</a></div><div class="ttdeci">void AddState(int State)</div><div class="ttdoc">Progress the state for this request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00386">torcrpcrequest.cpp:386</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202ab80170a14817d4283563f0003f9b8ead"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202ab80170a14817d4283563f0003f9b8ead">TorcRPCRequest::None</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00019">torcrpcrequest.h:19</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html">TorcRPCRequest</a></div><div class="ttdoc">A class encapsulating a Remote Procedure Call. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00014">torcrpcrequest.h:14</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a773028b98957c57fbd235948e7e7685b"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a773028b98957c57fbd235948e7e7685b">TorcRPCRequest::NotifyParent</a></div><div class="ttdeci">void NotifyParent(void)</div><div class="ttdoc">Signal to the parent that the request is ready (but may be errored). </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00312">torcrpcrequest.cpp:312</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a7e895894a445761424d38c26366f2b51"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a7e895894a445761424d38c26366f2b51">TorcRPCRequest::GetMethod</a></div><div class="ttdeci">QString GetMethod(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00432">torcrpcrequest.cpp:432</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a9ae1b2648525d982113035df1bc54f4b"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a9ae1b2648525d982113035df1bc54f4b">TorcRPCRequest::GetState</a></div><div class="ttdeci">int GetState(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00422">torcrpcrequest.cpp:422</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a75efcff7df233b3a3ac926c3dbcee6a4"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a75efcff7df233b3a3ac926c3dbcee6a4">TorcRPCRequest::AddPositionalParameter</a></div><div class="ttdeci">void AddPositionalParameter(const QVariant &amp;Value)</div><div class="ttdoc">Add a positional parameter. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00412">torcrpcrequest.cpp:412</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_aa39c5e47b7f6b8fb35d3ddd9204c88ca"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#aa39c5e47b7f6b8fb35d3ddd9204c88ca">TorcRPCRequest::GetPositionalParameters</a></div><div class="ttdeci">const QList&lt; QVariant &gt; &amp; GetPositionalParameters(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00452">torcrpcrequest.cpp:452</a></div></div>
<div class="ttc" id="torcloggingdefs_8h_html_a93519f65dd0ef21fc5be0c286a833ae4"><div class="ttname"><a href="../../d1/d37/torcloggingdefs_8h.html#a93519f65dd0ef21fc5be0c286a833ae4">false</a></div><div class="ttdeci">VERBOSE_PREAMBLE General info Playback related messages File and AutoExpire related messages Network protocol related messages Audio related messages JobQueue related messages EIT related messages DSMCC carousel related messages UPnP debugging messages xmltv output and related messages Media Manager debugging messages External executable related messages false</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d37/torcloggingdefs_8h_source.html#l00110">torcloggingdefs.h:110</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a3ddfd420e63d0f742b92456c00f1fca9"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a3ddfd420e63d0f742b92456c00f1fca9">TorcRPCRequest::IsNotification</a></div><div class="ttdeci">bool IsNotification(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00306">torcrpcrequest.cpp:306</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_aee839f1d92eb29217727a7a13ded7e24"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#aee839f1d92eb29217727a7a13ded7e24">TorcRPCRequest::SerialiseRequest</a></div><div class="ttdeci">QByteArray &amp; SerialiseRequest(TorcWebSocketReader::WSSubProtocol Protocol)</div><div class="ttdoc">Serialise the request for the given protocol. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00345">torcrpcrequest.cpp:345</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202a12df07b10e140b8645fff37d633c4343"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202a12df07b10e140b8645fff37d633c4343">TorcRPCRequest::Result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00025">torcrpcrequest.h:25</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a6a613dc8aba9beed46320ab9111f2c4c"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a6a613dc8aba9beed46320ab9111f2c4c">TorcRPCRequest::GetParameters</a></div><div class="ttdeci">const QList&lt; QPair&lt; QString, QVariant &gt; &gt; &amp; GetParameters(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00447">torcrpcrequest.cpp:447</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a2900e3c051379c8086f9d23b1bae3450"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a2900e3c051379c8086f9d23b1bae3450">TorcRPCRequest::GetReply</a></div><div class="ttdeci">const QVariant &amp; GetReply(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00442">torcrpcrequest.cpp:442</a></div></div>
<div class="ttc" id="class_torc_web_socket_reader_html_a6c998b57e09ce050435169ced7f2dcd8ac807614f4ebee06e2c4982dc1c96168f"><div class="ttname"><a href="../../d3/d9a/class_torc_web_socket_reader.html#a6c998b57e09ce050435169ced7f2dcd8ac807614f4ebee06e2c4982dc1c96168f">TorcWebSocketReader::SubProtocolJSONRPC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/torcwebsocketreader_8h_source.html#l00067">torcwebsocketreader.h:67</a></div></div>
<div class="ttc" id="torchttpserver_8h_html"><div class="ttname"><a href="../../df/d1b/torchttpserver_8h.html">torchttpserver.h</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a4311922f02204d218df8293b28210ff5"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a4311922f02204d218df8293b28210ff5">TorcRPCRequest::SetReply</a></div><div class="ttdeci">void SetReply(const QVariant &amp;Reply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00417">torcrpcrequest.cpp:417</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_ad9dfd7a6372a7be05888a5472ab03202"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#ad9dfd7a6372a7be05888a5472ab03202">TorcRPCRequest::State</a></div><div class="ttdeci">State</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d52/torcrpcrequest_8h_source.html#l00017">torcrpcrequest.h:17</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a1c19367a0f47c85d3f3445cc885c0609"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a1c19367a0f47c85d3f3445cc885c0609">TorcRPCRequest::GetParent</a></div><div class="ttdeci">QObject * GetParent(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00437">torcrpcrequest.cpp:437</a></div></div>
<div class="ttc" id="torclogging_8h_html_a73a147108bf0df6442820b82b022ef94"><div class="ttname"><a href="../../d4/df9/torclogging_8h.html#a73a147108bf0df6442820b82b022ef94">LOG</a></div><div class="ttdeci">#define LOG(_MASK_, _LEVEL_, _FORMAT_,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df9/torclogging_8h_source.html#l00031">torclogging.h:31</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_aa6d7eb36c3c225a55510ef7b52c468ab"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#aa6d7eb36c3c225a55510ef7b52c468ab">TorcRPCRequest::AddParameter</a></div><div class="ttdeci">void AddParameter(const QString &amp;Name, const QVariant &amp;Value)</div><div class="ttdoc">Add Parameter and value to list of call parameters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00402">torcrpcrequest.cpp:402</a></div></div>
<div class="ttc" id="class_torc_r_p_c_request_html_a865ef10756f640e86e9984a76904e307"><div class="ttname"><a href="../../db/dc6/class_torc_r_p_c_request.html#a865ef10756f640e86e9984a76904e307">TorcRPCRequest::SetID</a></div><div class="ttdeci">void SetID(int ID)</div><div class="ttdoc">Set the unique ID for this request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/torcrpcrequest_8cpp_source.html#l00392">torcrpcrequest.cpp:392</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 3 2018 11:03:13 for Torc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
